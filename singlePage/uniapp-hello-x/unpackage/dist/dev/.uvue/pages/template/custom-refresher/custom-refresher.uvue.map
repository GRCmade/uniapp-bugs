{"version":3,"file":"pages/template/custom-refresher/custom-refresher.uvue","names":[],"sources":["pages/template/custom-refresher/custom-refresher.uvue"],"sourcesContent":["<template>\r\n  <list-view class=\"list-view\" :refresher-enabled=\"true\" :refresher-triggered=\"refresherTriggered\"\r\n    refresher-default-style=\"none\" @refresherpulling=\"onRefresherpulling\" @refresherrefresh=\"onRefresherrefresh\"\r\n    @refresherrestore=\"onRefreshrestore\" :refresher-threshold=\"refresherThreshold\" refresher-max-drag-distance=\"200px\">\r\n\n    <sticky-header>\r\n      <view class=\"header\">\r\n        <text>sticky header</text>\r\n      </view>\r\n    </sticky-header>\r\n    <list-item v-for=\"i in 20\" class=\"content-item\">\r\n      <text class=\"text\">item-{{i}}</text>\r\n    </list-item>\r\n    <refresh-box slot=\"refresher\" :state=\"state\" :pullingDistance=\"pullingDistance\"></refresh-box>\r\n  </list-view>\r\n</template>\r\n\r\n<script>\r\n  import refreshBox from './refresh-box/refresh-box.uvue';\r\n  export default {\r\n    components: { refreshBox },\r\n    data() {\r\n      return {\r\n        refresherTriggered: false,\r\n        refresherThreshold: 40,\r\n        pullingDistance: 0,\r\n        resetting: false\r\n      }\r\n    },\r\n    computed: {\r\n      state() : number {\r\n        if (this.resetting) {\r\n          return 3;\r\n        }\r\n        if (this.refresherTriggered) {\r\n          return 2\r\n        }\r\n        if (this.pullingDistance > this.refresherThreshold) {\r\n          return 1\r\n        } else {\r\n          return 0\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      onRefresherpulling(e : RefresherEvent) {\r\n        // console.log('onRefresherpulling',e.detail.dy)\r\n        this.pullingDistance = e.detail.dy\r\n      },\r\n      onRefresherrefresh() {\r\n        this.refresherTriggered = true\r\n        setTimeout(() => {\r\n          this.refresherTriggered = false\r\n          this.resetting = true\r\n        }, 1500)\r\n      },\r\n      onRefreshrestore() {\r\n        this.pullingDistance = 0\r\n        this.resetting = false;\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .list-view {\r\n    flex: 1;\r\n    background-color: #f5f5f5;\r\n  }\r\n\n  .header {\n    justify-content: center;\n    height: 50px;\n    background-color: #f5f5f5;\n    padding: 15px;\n  }\n\r\n  .content-item {\r\n    padding: 15px;\r\n    margin: 5px 0;\r\n    background-color: #fff;\r\n    border-radius: 5px;\r\n  }\r\n\r\n  .text {\r\n    font-size: 14px;\r\n    color: #666;\r\n    line-height: 20px;\r\n  }\r\n</style>\n"],"mappings":"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"}