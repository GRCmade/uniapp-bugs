{"version":3,"file":"pages/template/scroll-fold-nav/scroll-fold-nav.uvue","names":[],"sources":["pages/template/scroll-fold-nav/scroll-fold-nav.uvue"],"sourcesContent":["<template>\n  <scroll-view @scroll=\"onScroll\" class=\"page\" show-scrollbar=\"false\">\n    <view ref=\"seatbar\" class=\"seatbar\"></view>\n\n    <view class=\"content\">\n      <view class=\"content-item\">\n        <text class=\"text\">1. 当前示例监听了 scroll-view 的 scroll 事件 ，滚动页面实时监听scrollTop。</text>\n        <text class=\"text\">2. 使用 ref 直接获取元素的节点，并在 scroll 事件中通过节点的 setProperty\n          方法来修改搜索导航栏的高度、位置和背景颜色等样式，从而达到滚动折叠的效果。</text>\n        <text class=\"text\">3. 请向上\\向下滚动页面观察效果。</text>\n      </view>\n      <view class=\"content-item\" v-for=\"(item,index) in 20\" :key=\"index\">\n        <text class=\"text\">content-{{item}}</text>\n      </view>\n    </view>\n\n    <view ref=\"navigatorbar\" class=\"navigatorbar\">\n      <view class=\"titlebar\">\n        <view class=\"backview\" @tap=\"back\">\n          <image class=\"back\" src=\"/static/template/scroll-fold-nav/back.png\" mode=\"widthFix\"></image>\n        </view>\n        <text ref=\"title\" class=\"title\">DCloud 为开发者而生</text>\n      </view>\n      <view ref=\"searchbar\" class=\"searchbar\" @tap=\"search\">\n        <image class=\"searchimg\" src=\"/static/template/scroll-fold-nav/search.png\" mode=\"widthFix\"></image>\n        <text class=\"searchinput\">请输入你要搜索的内容</text>\n        <text class=\"searchbutton\">搜索</text>\n      </view>\n    </view>\n  </scroll-view>\n</template>\n\n<script>\n  //导航栏高度\n  const NAVIBARHEIGHT = 88;\n  //搜索栏高度\n  const SEARCHBARHEIGHT = 40;\n  //返回键按钮宽度\n  const BACKWIDTH = 32;\n  export default {\n    data() {\n      return {\n        statusBarHeight: 0,\n        nviBarHeight: 0,\n        naviElement: null as UniElement | null,\n        titleElement: null as UniElement | null,\n        searchElement: null as UniElement | null\n      }\n    },\n    onLoad() {\n\n      this.statusBarHeight = uni.getSystemInfoSync().statusBarHeight;\n\n      this.nviBarHeight = NAVIBARHEIGHT + this.statusBarHeight;\n    },\n    onReady() {\n      this.naviElement = this.$refs['navigatorbar'] as UniElement;\n      this.searchElement = this.$refs['searchbar'] as UniElement;\n      this.titleElement = this.$refs['title'] as UniElement;\n      //适配不同状态栏高度\n      this.naviElement?.style?.setProperty('padding-top', this.statusBarHeight+'px');\n      this.naviElement?.style?.setProperty('height', (NAVIBARHEIGHT+this.statusBarHeight)+'px');\n      let seatElement = this.$refs['seatbar'] as UniElement;\n      seatElement.style.setProperty('height', (NAVIBARHEIGHT+this.statusBarHeight)+'px');\n    },\n    methods: {\n      onScroll(e : ScrollEvent) {\n        let offset = e.detail.scrollTop>SEARCHBARHEIGHT?SEARCHBARHEIGHT:e.detail.scrollTop;//(e.detail.scrollTop<0?0:e.detail.scrollTop)\n        this.naviElement?.style?.setProperty('height', (this.nviBarHeight -offset)+'px');\n        this.titleElement?.style?.setProperty('opacity', (1-offset/SEARCHBARHEIGHT));\n        this.searchElement?.style?.setProperty('left', ((offset<0)?0:BACKWIDTH*offset/SEARCHBARHEIGHT)+'px');\n      },\n      back() {\n        uni.navigateBack();\n      },\n      search() {\n        uni.showToast({\n          title: '暂不支持',\n          icon: 'none'\n        });\n      }\n    }\n  }\n</script>\n\n<style>\n.page {\n  flex: 1;\n  background-color: #f5f5f5;\n}\n.navigatorbar {\n  position: fixed;\n\n  padding-top: 35px;\n  height: 124px;\n\n\n\n\n  border-bottom: 1px solid #efefef;\n  width: 100%;\n  background-color: #f5f5f5;\n}\n.titlebar {\n  flex-direction: row;\n  align-items: center;\n  height: 44px;\n}\n.backview {\n  width: 44px;\n  height: 44px;\n  justify-content: center;\n  align-items: center;\n}\n.back {\n  width: 20px;\n}\n.title {\n  margin: 0px 2px;\n}\n.searchbar {\n  position: absolute;\n  bottom: 2px;\n  left: 0px;\n  right: 0px;\n  background-color: #FFFFFF;\n  border: 1px solid #fbdf0d;\n  height: 32px;\n  border-radius: 100px;\n  margin: 6px 12px;\n  padding: 8px;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n}\n.searchimg {\n  width: 15px;\n}\n.searchinput {\n  flex-grow: 1;\n  font-size: 12px;\n  color: #666;\n}\n.searchbutton {\n  font-size: 12px;\n  background-color: #ff6900;\n  color: #FFF;\n  padding: 5px 8px;\n  border-radius: 100px;\n}\n.seatbar {\n\n  height: 124px;\n\n\n\n\n}\n.content {\n  padding: 5px 15px;\n}\n.content-item {\n  padding: 15px;\n  margin: 5px 0;\n  background-color: #fff;\n  border-radius: 5px;\n}\n.text {\n  font-size: 14px;\n  color: #666;\n  line-height: 20px;\n}\n\n</style>\n"],"mappings":"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AAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAC1D,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACrD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAC9E,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACzF,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACrD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACpF,CAAC;IACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QACxB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/H,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAChF,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC5E,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACtG,CAAC;MACD,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACpB,CAAC;MACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;UACZ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;UACb,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QACb,CAAC,CAAC;MACJ;IACF;EACF;;;;;;SAjFA,mBA4Bc;IA5BA,QAAM,EAAE,aAAQ;IAAE,KAAK,EAAC,MAAM;IAAC,gBAAc,EAAC,OAAO;;IACjE,mBAA2C;MAArC,GAAG,EAAC,SAAS;MAAC,KAAK,EAAC,SAAS;;IAEnC,mBAUO,mBAVD,KAAK,EAAC,SAAS;MACnB,mBAKO,mBALD,KAAK,EAAC,cAAc;QACxB,mBAAgF,mBAA1E,KAAK,EAAC,MAAM,KAAC,wDAAsD;QACzE,mBAC8C,mBADxC,KAAK,EAAC,MAAM,KAAC,0FACoB;QACvC,mBAA4C,mBAAtC,KAAK,EAAC,MAAM,KAAC,qBAAkB;;MAEvC,mBAEO,yCAF2C,EAAE,GAAjB,IAAI,EAAC,KAAK,EAAV,OAAI;eAAvC,mBAEO;UAFD,KAAK,EAAC,cAAc;UAA6B,GAAG,EAAE,KAAK;;UAC/D,mBAA0C,mBAApC,KAAK,EAAC,MAAM,KAAC,UAAQ,mBAAE,IAAI;;;;IAIrC,mBAYO;MAZD,GAAG,EAAC,cAAc;MAAC,KAAK,EAAC,cAAc;;MAC3C,mBAKO,mBALD,KAAK,EAAC,UAAU;QACpB,mBAEO;UAFD,KAAK,EAAC,UAAU;UAAE,OAAG,EAAE,SAAI;;UAC/B,mBAA4F;YAArF,KAAK,EAAC,MAAM;YAAC,GAAG,EAAC,2CAA2C;YAAC,IAAI,EAAC,UAAU;;;QAErF,mBAAoD;UAA9C,GAAG,EAAC,OAAO;UAAC,KAAK,EAAC,OAAO;YAAC,eAAa;;MAE/C,mBAIO;QAJD,GAAG,EAAC,WAAW;QAAC,KAAK,EAAC,WAAW;QAAE,OAAG,EAAE,WAAM;;QAClD,mBAAmG;UAA5F,KAAK,EAAC,WAAW;UAAC,GAAG,EAAC,6CAA6C;UAAC,IAAI,EAAC,UAAU;;QAC1F,mBAA2C,mBAArC,KAAK,EAAC,aAAa,KAAC,YAAU;QACpC,mBAAoC,mBAA9B,KAAK,EAAC,cAAc,KAAC,IAAE"}