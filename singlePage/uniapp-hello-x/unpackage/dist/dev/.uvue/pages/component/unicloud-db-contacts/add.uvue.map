{"version":3,"file":"pages/component/unicloud-db-contacts/add.uvue","names":[],"sources":["pages/component/unicloud-db-contacts/add.uvue"],"sourcesContent":["<template>\n  <view class=\"page\">\n    <unicloud-db ref=\"udb\" :collection=\"collection\" loadtime=\"manual\"></unicloud-db>\n    <form @submit=\"onFormSubmit\">\n      <view class=\"form-item\">\n        <text class=\"form-item-label\">姓名</text>\n        <input class=\"form-item-input\" placeholder=\"姓名\" name=\"username\" />\n      </view>\n      <view class=\"form-item\">\n        <text class=\"form-item-label\">电话</text>\n        <input class=\"form-item-input\" placeholder=\"电话\" name=\"mobile\" />\n      </view>\n      <view class=\"form-item\">\n        <text class=\"form-item-label\">邮箱</text>\n        <input class=\"form-item-input\" placeholder=\"邮箱地址\" name=\"email\" />\n      </view>\n      <view class=\"form-item\">\n        <text class=\"form-item-label\">备注</text>\n        <textarea class=\"form-item-input\" placeholder=\"备注\" name=\"comment\" maxlength=\"-1\"/>\n      </view>\n      <view class=\"form-item\">\n        <text class=\"form-item-label\">性别</text>\n        <radio-group class=\"radio-list\" name=\"gender\">\n          <view class=\"radio-item\" v-for=\"(item, _) in genderList\" :key=\"item.value\">\n            <radio :value=\"item.value\" />\n            <text>{{item.text}}</text>\n          </view>\n        </radio-group>\n      </view>\n      <button class=\"btn-add\" type=\"primary\" form-type=\"submit\">保存</button>\n    </form>\n  </view>\n</template>\n\n<script>\n  import { COLLECTION_NAME, GenderType, GenderList, UNICLOUD_DB_CONTACTS_ADD } from './types.uts'\n\n  export default {\n    data() {\n      return {\n        collection: COLLECTION_NAME,\n        genderList: GenderList as GenderType[],\n        uniCloudElement: null as UniCloudDBElement | null\n      }\n    },\n    onReady() {\n      this.uniCloudElement = this.$refs['udb'] as UniCloudDBElement\n    },\n    methods: {\n      onFormSubmit: function (e : UniFormSubmitEvent) {\n        const formData = e.detail.value\n        const genderString = formData['gender'] as string\n        formData['gender'] = (genderString.length > 0) ? parseInt(genderString) : -1\n        console.log('formData', formData)\n        this.uniCloudElement!.add(formData, {\n          showToast: false,\n          needLoading: true,\n          loadingTitle: \"正在保存...\",\n          success: (_ : UniCloudDBAddResult) => {\n            // TODO 后续通过 EventChannel 实现\n            uni.$emit(UNICLOUD_DB_CONTACTS_ADD, '')\n            setTimeout(() => {\n              uni.navigateBack()\n            }, 500)\n          },\n          fail: (err : any | null) => {\n            const error = err as UniCloudError\n            uni.showModal({\n              content: error.errMsg,\n              showCancel: false\n            })\n          }\n        })\n      }\n    }\n  }\n</script>\n\n<style>\n  .page {\n    padding: 15px;\n  }\n\n  .form-item {\n    flex-direction: row;\n    margin-bottom: 15px;\n    align-items: center;\n  }\n\n  .form-item-label {\n    width: 45px;\n    margin-right: 10px;\n  }\n\n  .form-item-input {\n    flex: 1;\n    font-size: 14px;\n    color: #666;\n    border: 1px #e5e5e5 solid;\n    border-radius: 5px;\n    padding: 8px;\n  }\n\n  .radio-list {\n    flex-direction: row;\n  }\n\n  .radio-item {\n    flex-direction: row;\n    margin-right: 30px;\n    align-items: center;\n  }\n\n  .btn-add {\n    margin-top: 50px;\n  }\n</style>\n"],"mappings":";EAmCE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;EAE9F,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACb,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACL,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC3B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACtC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;MAClD;IACF,CAAC;IACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC9D,CAAC;IACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QAC9C,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC9B,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAChD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC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"}