{"version":3,"file":"pages/component/unicloud-db-contacts/detail.uvue","names":[],"sources":["pages/component/unicloud-db-contacts/detail.uvue"],"sourcesContent":["<template>\n  <scroll-view class=\"page\">\n    <unicloud-db ref=\"udb\" v-slot:default=\"{data, loading, error}\" :collection=\"collection\" :where=\"where\"\n      page-data=\"replace\">\n      <view v-if=\"error!=null\" class=\"error\">{{error.errMsg}}</view>\n      <view v-if=\"loading\" class=\"loading\">正在加载...</view>\n      <view v-if=\"data.length>0\">\n        <view class=\"form-item\">\n          <text class=\"form-item-label\">姓名</text>\n          <text class=\"form-item-input\">{{data[0]['username']}}</text>\n        </view>\n        <view class=\"form-item\">\n          <text class=\"form-item-label\">电话</text>\n          <text class=\"form-item-input\">{{data[0]['mobile']}}</text>\n        </view>\n        <view class=\"form-item\">\n          <text class=\"form-item-label\">邮箱</text>\n          <text class=\"form-item-input\">{{data[0]['email']}}</text>\n        </view>\n        <view class=\"form-item\">\n          <text class=\"form-item-label\">备注</text>\n          <text class=\"form-item-input\">{{data[0]['comment']}}</text>\n        </view>\n        <view class=\"form-item\">\n          <text class=\"form-item-label\">性别</text>\n          <text class=\"form-item-input\">{{displayGender(data[0].getNumber('gender'))}}</text>\n        </view>\n        <button type=\"default\" @click=\"gotoUpdatePage(data[0].getString('_id'))\">编辑</button>\n      </view>\n    </unicloud-db>\n  </scroll-view>\n</template>\n\n<script>\n  import { COLLECTION_NAME, GenderType, GenderList, UNICLOUD_DB_CONTACTS_UPDATE } from './types.uts'\n\n  export default {\n    data() {\n      return {\n        collection: '',\n        where: '',\n        whereID: '',\n        uniCloudElement: null as UniCloudDBElement | null\n      }\n    },\n    onLoad(options) {\n      this.collection = COLLECTION_NAME;\n      this.whereID = options['id'] as string;\n      this.where = `_id=='${this.whereID}'`;\n    },\n    onShow() {\n      // TODO 后续通过 EventChannel 实现\n      uni.$off(UNICLOUD_DB_CONTACTS_UPDATE, this.onDataChange);\n    },\n    onUnload() {\n      // TODO 后续通过 EventChannel 实现\n      uni.$off(UNICLOUD_DB_CONTACTS_UPDATE, this.onDataChange);\n    },\n    onReady() {\n      this.uniCloudElement = this.$refs['udb'] as UniCloudDBElement\n    },\n    methods: {\n      displayGender(value : number | null) : string {\n        const str = value ?? -1\n        return (GenderList as GenderType[]).find((item : GenderType) : boolean => {\n          return item.value == str\n        })!.text;\n      },\n      gotoUpdatePage(id : string | null) {\n        // TODO 后续通过 EventChannel 实现\n        uni.$on(UNICLOUD_DB_CONTACTS_UPDATE, this.onDataChange);\n        uni.navigateTo({\n          url: './edit?id=' + id\n        })\n      },\n      onDataChange(_ : string) {\n        this.uniCloudElement!.loadData()\n      }\n    }\n  }\n</script>\n\n<style>\n  .page {\n    flex: 1;\n    padding: 15px;\n  }\n\n  .loading {\n    align-items: center;\n  }\n\n  .form-item {\n    flex-direction: row;\n    margin-bottom: 15px;\n    align-items: center;\n    padding: 8px 0;\n  }\n\n  .form-item-label {\n    width: 45px;\n    margin-right: 10px;\n  }\n\n  .form-item-input {\n    flex: 1;\n    font-size: 14px;\n    color: #666;\n  }\n</style>\n"],"mappings":"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"}