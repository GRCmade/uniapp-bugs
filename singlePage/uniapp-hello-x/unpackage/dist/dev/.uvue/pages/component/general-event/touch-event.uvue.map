{"version":3,"file":"pages/component/general-event/touch-event.uvue","names":[],"sources":["pages/component/general-event/touch-event.uvue"],"sourcesContent":["<template>\n  <scroll-view style=\"flex: 1\">\n    <page-head title=\"拖拽图标测试相关事件\"></page-head>\n    <view class=\"container\">\n      <view class=\"view-box\">\n        <image class=\"icon\" id=\"icon\" src=\"../image/logo.png\" @touchstart=\"onTouchStart\" @touchcancel=\"onTouchCancel\" @touchmove=\"onTouchMove\" @touchend=\"onTouchEnd\"></image>\n      </view>\n\n    </view>\n    <view v-if=\"touchEvent !== null\">\n      <text class=\"title1\">touches: </text>\n      <template v-for=\"(touch, index) in touchEvent!.touches\" :key=\"index\">\n        <text class=\"title2\">touch[{{ index }}]:</text>\n        <text>identifier: {{touch.identifier}}</text>\n        <text>pageX: {{ touch.pageX }}, pageY: {{ touch.pageY }}</text>\n        <text>clientX: {{ touch.clientX }}, clientY: {{ touch.clientY }}</text>\n        <text>screenX: {{ touch.screenX }}, screenY: {{ touch.screenY }}</text>\n      </template>\n    </view>\n  </scroll-view>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n        move: false,\n        posX: 0,\n        posY: 0,\n        lastX: 0,\n        lastY: 0,\n        touchEvent: null as TouchEvent | null,\n        icon: null as UniElement | null\n\t\t\t}\n\t\t},\n    onReady() {\n      this.icon = uni.getElementById(\"icon\")\n    },\n\t\tmethods: {\n      onTouchStart(e: TouchEvent) {\n        this.touchEvent = e\n        if(!this.move) {\n          this.move = true\n          this.posX = e.touches[0].screenX\n          this.posY = e.touches[0].screenY\n        }\n      },\n\t\t\tonTouchMove(e: TouchEvent) {\n        e.preventDefault()\n        this.touchEvent = e\n        let p = e.touches[0]\n        if(p.screenX == this.lastX && p.screenY == this.lastY){\n        \treturn\n        }\n        let x = p.screenX-this.posX\n        let y = p.screenY-this.posY\n        this.lastX = p.screenX\n        this.lastY = p.screenY\n        this.icon?.style?.setProperty('transform', 'translate('+x+'px,'+y+'px)')\n      },\n      onTouchEnd(e: TouchEvent) {\n        if(e.touches.length == 0) {\n          this.resetIcon()\n          this.touchEvent = null\n        }\n      },\n      onTouchCancel(_: TouchEvent) {\n        this.resetIcon()\n        this.touchEvent = null\n      },\n      resetIcon() {\n        this.move = false;\n        this.posX = 0;\n        this.posY = 0;\n        this.icon?.style?.setProperty('transform', 'translate(0px,0px)')\n      }\n\t\t}\n\t}\n</script>\n\n<style>\n\n  .container {\n    width: 100%;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  .view-box {\n    width: 300px;\n    height: 300px;\n    align-items: center;\n    justify-content: center;\n    border-style: solid;\n  }\n\n  .icon {\n    width: 100px;\n    height: 100px;\n  }\n\n  .msg-text {\n    margin-bottom: 100px;\n  }\n\n  .title1 {\n    margin-top: 10px;\n    font-size: 18px;\n  }\n\n  .title2 {\n    margin-top: 5px;\n    font-size: 16px;\n  }\n\n</style>\n"],"mappings":"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"}