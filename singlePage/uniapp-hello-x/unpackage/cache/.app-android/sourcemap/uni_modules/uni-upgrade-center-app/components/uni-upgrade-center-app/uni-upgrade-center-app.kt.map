{"version":3,"sources":["uni_modules/uni-upgrade-center-app/components/uni-upgrade-center-app/uni-upgrade-center-app.uvue","App.uvue"],"sourcesContent":["<template>\n\t<view v-show=\"shown\" class=\"mask flex-center\">\n\t\t<view class=\"content\">\n\n\t\t\t<view class=\"content-top\">\n\t\t\t\t<text class=\"content-top-text\">{{title}}</text>\n\t\t\t\t<image class=\"content-top-image\" mode=\"widthFix\"\n\t\t\t\t\tsrc=\"/uni_modules/uni-upgrade-center-app/static/bg_top.png\"></image>\n\t\t\t</view>\n\n\t\t\t<view class=\"content-body\">\n\t\t\t\t<view class=\"content-body-title\">\n\t\t\t\t\t<text class=\"text title\">{{subTitle}}</text>\n\t\t\t\t\t<text class=\"text version\">v{{version}}</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"body\">\n\t\t\t\t\t<scroll-view class=\"box-des-scroll\" scroll-y=\"true\">\n\t\t\t\t\t\t<text class=\"text box-des\">\n\t\t\t\t\t\t\t{{contents}}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</scroll-view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"footer flex-center\">\n\t\t\t\t\t<template v-if=\"isiOS\">\n\t\t\t\t\t\t<button class=\"content-button\" style=\"border: none;color: #fff;\" plain @click=\"jumpToAppStore\">\n\t\t\t\t\t\t\t{{downLoadBtnTextiOS}}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<template v-if=\"!downloadSuccess\">\n\t\t\t\t\t\t\t<view class=\"progress-box flex-column\" v-if=\"downloading\">\n\t\t\t\t\t\t\t\t<progress class=\"progress\" :percent=\"downLoadPercent\" activeColor=\"#3DA7FF\" :show-info=\"true\" :stroke-width=\"10\" />\n\t\t\t\t\t\t\t\t<view style=\"width:100%;display: flex;justify-content: space-around;flex-direction: row;\">\n\t\t\t\t\t\t\t\t\t<text class=\"text\" style=\"font-size: 14px;\">{{downLoadingText}}</text>\n\t\t\t\t\t\t\t\t\t<text class=\"text\" style=\"font-size: 14px;\">({{downloadedSize}}/{{packageFileSize}}M)</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t<button v-else class=\"content-button\" @click=\"updateApp\">\n\t\t\t\t\t\t\t\t{{downLoadBtnText}}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<button v-else-if=\"downloadSuccess && !installed\" class=\"content-button\" :loading=\"installing\" :disabled=\"installing\" @click=\"installPackage\">\n\t\t\t\t\t\t\t{{installing ? '正在安装……' : '下载完成，立即安装'}}\n\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t<button v-else-if=\"installed\" class=\"content-button\" @click=\"installPackage\">\n\t\t\t\t\t\t\t安装未完成，点击安装\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</template>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<view class=\"content-bottom\">\n\t\t\t\t<image v-if=\"!is_mandatory\" class=\"close-img\" mode=\"widthFix\" src=\"/uni_modules/uni-upgrade-center-app/static/app_update_close.png\" @click=\"closeUpdate\">\n\t\t\t\t</image>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\timport { openSchema as utsOpenSchema } from '@/uni_modules/uts-openSchema'\n  import { createNotificationProgress, cancelNotificationProgress, finishNotificationProgress } from '@/uni_modules/uts-progressNotification'\n  import { type CreateNotificationProgressOptions, type FinishNotificationProgressOptions } from '@/uni_modules/uts-progressNotification/utssdk/interface.uts'\n\timport { UniUpgradeCenterResult, StoreListItem } from '../../utils/call-check-version'\n\n\tconst platform_iOS = 'iOS';\n\tconst platform_Android = 'Android';\n\tconst requiredKey = ['version', 'url', 'type']\n\tlet downloadTask : DownloadTask | null = null;\n\tlet openSchemePromise: Promise<boolean> | null = null;\n\n\tconst openSchema = (url: string): Promise<boolean> => new Promise<boolean>((resolve,reject) =>{\n    try{\n      utsOpenSchema(url)\n      resolve(true)\n    }catch(e){\n      reject(false)\n    }\n  })\n\n\texport default {\n    emits: ['close', 'show'],\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tshown: false,\n\t\t\t\t// 从之前下载安装\n\t\t\t\tinstallForBeforeFilePath: '',\n\n\t\t\t\t// 安装\n\t\t\t\tinstalled: false,\n\t\t\t\tinstalling: false,\n\n\t\t\t\t// 下载\n\t\t\t\tdownloadSuccess: false,\n\t\t\t\tdownloading: false,\n\n\t\t\t\tdownLoadPercent: 0,\n\t\t\t\tdownloadedSize: 0,\n\t\t\t\tpackageFileSize: 0,\n\n\t\t\t\ttempFilePath: '', // 要安装的本地包地址\n\n\t\t\t\t// 默认安装包信息\n\t\t\t\ttitle: '更新日志',\n\t\t\t\tcontents: '',\n\t\t\t\tversion: '',\n\t\t\t\tis_mandatory: false,\n\t\t\t\turl: \"\",\n\t\t\t\tplatform: [] as string[],\n        store_list: null as StoreListItem[] | null,\n\n\t\t\t\t// 可自定义属性\n\t\t\t\tsubTitle: '发现新版本',\n\t\t\t\tdownLoadBtnTextiOS: '立即跳转更新',\n\t\t\t\tdownLoadBtnText: '立即下载更新',\n\t\t\t\tdownLoadingText: '安装包下载中，请稍后'\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tisiOS() : boolean {\n\t\t\t\treturn this.platform.includes(platform_iOS);\n\t\t\t},\n      isAndroid() : boolean {\n\t\t\t\treturn this.platform.includes(platform_Android);\n\t\t\t},\n\t\t\tneedNotificationProgress(): boolean {\n\t\t\t\treturn this.isAndroid && !this.is_mandatory\n\t\t\t}\n\t\t},\n    beforeUnmount() {\n      if (this.needNotificationProgress) {\n        cancelNotificationProgress()\n      }\n    },\n\t\tmethods: {\n      jumpToAppStore() {\n        openSchema(this.url)\n      },\n\t\t\tshow(shown : boolean, localPackageInfo : UniUpgradeCenterResult | null) {\n\t\t\t\tif (localPackageInfo === null) return;\n\n\t\t\t\tfor (let key in localPackageInfo) {\n\t\t\t\t\tif (requiredKey.indexOf(key) != -1 && localPackageInfo[key] === null) {\n\t\t\t\t\t\tconsole.error(`参数 ${key} 必填，请检查后重试`)\n\t\t\t\t\t\tuni.navigateBack()\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.title = localPackageInfo.title\n\t\t\t\tthis.url = localPackageInfo.url\n\t\t\t\tthis.contents = localPackageInfo.contents\n\t\t\t\tthis.is_mandatory = localPackageInfo.is_mandatory\n\t\t\t\tthis.platform = localPackageInfo.platform\n\t\t\t\tthis.version = localPackageInfo.version\n        this.store_list = localPackageInfo.store_list\n\t\t\t\tthis.shown = shown\n\n        this.$emit('show')\n\t\t\t},\n      askAbortDownload() {\n        uni.showModal({\n          title: '是否取消下载？',\n          cancelText: '否',\n          confirmText: '是',\n          success: res => {\n            if (res.confirm) {\n              if (downloadTask !== null) downloadTask!.abort()\n              this.closePopup()\n            }\n          }\n        });\n      },\n\t\t\tcloseUpdate() {\n\t\t\t\tif (this.downloading) {\n\t\t\t\t\tif (this.is_mandatory) {\n\t\t\t\t\t\treturn uni.showToast({\n\t\t\t\t\t\t\ttitle: '下载中，请稍后……',\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\tduration: 500\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n          if (!this.needNotificationProgress) {\n            this.askAbortDownload()\n            return;\n          }\n\t\t\t\t}\n\t\t\t\tthis.closePopup()\n\t\t\t},\n\t\t\tclosePopup() {\n\t\t\t\tthis.shown = false\n\t\t\t\tthis.downloadSuccess = false\n\t\t\t\tthis.downloading = false\n\t\t\t\tthis.downLoadPercent = 0\n\t\t\t\tthis.downloadedSize = 0\n\t\t\t\tthis.packageFileSize = 0\n\t\t\t\tthis.tempFilePath = ''\n\n\t\t\t\tthis.installing = false\n\t\t\t\tthis.installed = false\n\n        if (this.needNotificationProgress) cancelNotificationProgress()\n        this.$emit('close')\n\t\t\t},\n\t\t\tupdateApp() {\n        const checkStoreScheme = this.checkStoreScheme()\n        if (checkStoreScheme !== null) {\n          checkStoreScheme\n            .then(_ => { })\n            .catch(() => { this.downloadPackage() })\n            .finally(() => {\n              openSchemePromise = null\n            })\n        } else { this.downloadPackage() }\n\t\t\t},\n      // 跳转应用商店\n      checkStoreScheme(): Promise<boolean> | null {\n        if (this.store_list !== null) {\n          const storeList: StoreListItem[] = this.store_list!.filter((item: StoreListItem): boolean => item.enable)\n          if (storeList.length > 0) {\n            if (openSchemePromise === null) {\n              openSchemePromise = Promise.reject() as Promise<boolean>\n            }\n            storeList\n              .sort((cur: StoreListItem, next: StoreListItem): number => next.priority - cur.priority)\n              .map((item: StoreListItem): string => item.scheme)\n              .reduce((promise: Promise<boolean>, cur: string): Promise<boolean> => {\n                openSchemePromise = promise.catch((): Promise<boolean> => openSchema(cur))\n                return openSchemePromise!\n              }, openSchemePromise!)\n            return openSchemePromise!\n          }\n        }\n\n\t\t\t\treturn null\n      },\n\t\t\tdownloadPackage() {\n\t\t\t\t//下载包\n\t\t\t\tdownloadTask = uni.downloadFile({\n\t\t\t\t\turl: this.url,\n\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\tif (res.statusCode == 200) {\n\t\t\t\t\t\t\tthis.tempFilePath = res.tempFilePath\n\t\t\t\t\t\t\tthis.downLoadComplete()\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: err => {\n\t\t\t\t\t\tconsole.log('downloadFile err: ', err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (downloadTask !== null) {\n\t\t\t\t\tthis.downloading = true;\n          if (this.needNotificationProgress) {\n            this.closePopup()\n          }\n\t\t\t\t\tdownloadTask!.onProgressUpdate(res => {\n\t\t\t\t\t\tthis.downLoadPercent = parseFloat(res.progress.toFixed(0));\n\t\t\t\t\t\tthis.downloadedSize = parseFloat((res.totalBytesWritten / Math.pow(1024, 2)).toFixed(2));\n\t\t\t\t\t\tthis.packageFileSize = parseFloat((res.totalBytesExpectedToWrite / Math.pow(1024, 2)).toFixed(2));\n\n            if (this.needNotificationProgress) {\n              createNotificationProgress({\n              \ttitle: \"升级中心正在下载安装包……\",\n              \tcontent: `${this.downLoadPercent}%`,\n              \tprogress: this.downLoadPercent,\n                onClick: () => {\n                  if (!this.downloadSuccess) {\n                    this.askAbortDownload()\n                  }\n                }\n              } as CreateNotificationProgressOptions)\n            }\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tdownLoadComplete() {\n\t\t\t\tthis.downloadSuccess = true;\n\t\t\t\tthis.downloading = false;\n\n\t\t\t\tthis.downLoadPercent = 0\n\t\t\t\tthis.downloadedSize = 0\n\t\t\t\tthis.packageFileSize = 0\n\n\t\t\t\tdownloadTask = null;\n\n        if (this.needNotificationProgress) {\n          finishNotificationProgress({\n            title: \"安装升级包\",\n            content: \"下载完成\",\n            onClick(){}\n          } as FinishNotificationProgressOptions)\n\n          this.installPackage();\n          return\n        }\n\n\t\t\t\t// 强制更新，直接安装\n\t\t\t\tif (this.is_mandatory) {\n          this.installPackage();\n\t\t\t\t}\n\t\t\t},\n\t\t\tinstallPackage() {\n\t\t\t\tthis.installing = true;\n\n\t\t\t\tuni.installApk({\n\t\t\t\t\tfilePath: this.tempFilePath,\n\t\t\t\t\tsuccess: _ => {\n\t\t\t\t\t\tconsole.log('installApk success');\n\t\t\t\t\t\tthis.installing = false;\n\t\t\t\t\t\tthis.installed = true;\n\t\t\t\t\t},\n\t\t\t\t\tfail: err => {\n\t\t\t\t\t\tconsole.error('installApk fail', err);\n\t\t\t\t\t\t// 安装失败需要重新下载安装包\n\t\t\t\t\t\tthis.installing = false;\n\t\t\t\t\t\tthis.installed = false;\n\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '更新失败，请重新下载',\n\t\t\t\t\t\t\tcontent: `uni.installApk 错误码 ${err.errCode}`,\n\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// 安装跳出覆盖安装，此处直接返回上一页\n\t\t\t\tif (!this.is_mandatory) {\n\t\t\t\t\tuni.navigateBack()\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.flex-center {\n\n\n\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\n\t.mask {\n\t\tposition: fixed;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground-color: rgba(0, 0, 0, .65);\n\t}\n\n\t.content {\n\t\tposition: relative;\n\t\ttop: 0;\n\t\twidth: 600rpx;\n\t\tbackground-color: transparent;\n\t}\n\n\t.text {\n\t\tfont-family: Source Han Sans CN;\n\t}\n\n\t.content-top {\n\t\twidth: 100%;\n\t\tborder-bottom-color: #fff;\n\t\tborder-bottom-width: 15px;\n\t\tborder-bottom-style: solid;\n\t}\n\n\t.content-top-image {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tbottom: -18px;\n\t}\n\n\t.content-top-text {\n\t\tfont-size: 22px;\n\t\tfont-weight: bold;\n\t\tcolor: #F8F8FA;\n\t\tposition: absolute;\n\t\twidth: 65%;\n\t\ttop: 77.5px;\n\t\tleft: 25px;\n\t\tz-index: 1;\n\t}\n\n\t.content-body {\n\t\tbox-sizing: border-box;\n\t\tpadding: 0 25px;\n\t\twidth: 100%;\n\t\tbackground-color: #fff;\n\t\tborder-bottom-left-radius: 15px;\n\t\tborder-bottom-right-radius: 15px;\n\t}\n\n\t.content-body-title {\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t}\n\n\t.content-body-title .version {\n\t\tpadding-left: 10px;\n\t\tcolor: #fff;\n\t\tfont-size: 10px;\n\t\tmargin-left: 5px;\n\t\tpadding: 2px 4px;\n\t\tborder-radius: 10px;\n\t\tbackground: #50aefd;\n\t}\n\n\t.title {\n\t\tfont-size: 16px;\n\t\tfont-weight: bold;\n\t\tcolor: #3DA7FF;\n\t\tline-height: 38px;\n\t}\n\n\t.footer {\n\t\theight: 75px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-around;\n\t}\n\n\t.box-des-scroll {\n\t\tbox-sizing: border-box;\n\t\tpadding: 0 15px;\n\t\theight: 100px;\n\t}\n\n\t.box-des {\n\t\tfont-size: 13px;\n\t\tcolor: #000000;\n\t\tline-height: 25px;\n\t}\n\n\t.progress-box {\n\t\twidth: 100%;\n\t}\n\n\t.progress {\n\t\twidth: 90%;\n\t\theight: 20px;\n\t}\n\n\t.content-bottom {\n\t\theight: 75px;\n\t}\n\n\t.close-img {\n\t\twidth: 35px;\n\t\theight: 35px;\n\t\tz-index: 1000;\n\t\tposition: relative;\n\t\tbottom: -25px;\n\t\tleft: 132px;\n\t}\n\n\t.content-button {\n\t\twidth: 100%;\n\t\theight: 40px;\n\t\tline-height: 40px;\n\n\t\tfont-size: 15px;\n\t\tfont-weight: 400;\n\t\tborder-radius: 20px;\n\t\tborder: none;\n\t\tcolor: #fff;\n\n\t\ttext-align: center;\n\n\t\tbackground-color: #1785ff;\n\t}\n\n\t.flex-column {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t}\n</style>\n",null],"names":[],"mappings":"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"}