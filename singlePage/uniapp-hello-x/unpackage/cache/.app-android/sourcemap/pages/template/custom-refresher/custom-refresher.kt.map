{"version":3,"sources":["pages/template/custom-refresher/custom-refresher.uvue","pages/template/custom-refresher/custom-refresher.uvue?type=page"],"sourcesContent":["<template>\r\n  <list-view class=\"list-view\" :refresher-enabled=\"true\" :refresher-triggered=\"refresherTriggered\"\r\n    refresher-default-style=\"none\" @refresherpulling=\"onRefresherpulling\" @refresherrefresh=\"onRefresherrefresh\"\r\n    @refresherrestore=\"onRefreshrestore\" :refresher-threshold=\"refresherThreshold\" refresher-max-drag-distance=\"200px\">\r\n\n    <sticky-header>\r\n      <view class=\"header\">\r\n        <text>sticky header</text>\r\n      </view>\r\n    </sticky-header>\r\n    <list-item v-for=\"i in 20\" class=\"content-item\">\r\n      <text class=\"text\">item-{{i}}</text>\r\n    </list-item>\r\n    <refresh-box slot=\"refresher\" :state=\"state\" :pullingDistance=\"pullingDistance\"></refresh-box>\r\n  </list-view>\r\n</template>\r\n\r\n<script>\r\n  import refreshBox from './refresh-box/refresh-box.uvue';\r\n  export default {\r\n    components: { refreshBox },\r\n    data() {\r\n      return {\r\n        refresherTriggered: false,\r\n        refresherThreshold: 40,\r\n        pullingDistance: 0,\r\n        resetting: false\r\n      }\r\n    },\r\n    computed: {\r\n      state() : number {\r\n        if (this.resetting) {\r\n          return 3;\r\n        }\r\n        if (this.refresherTriggered) {\r\n          return 2\r\n        }\r\n        if (this.pullingDistance > this.refresherThreshold) {\r\n          return 1\r\n        } else {\r\n          return 0\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      onRefresherpulling(e : RefresherEvent) {\r\n        // console.log('onRefresherpulling',e.detail.dy)\r\n        this.pullingDistance = e.detail.dy\r\n      },\r\n      onRefresherrefresh() {\r\n        this.refresherTriggered = true\r\n        setTimeout(() => {\r\n          this.refresherTriggered = false\r\n          this.resetting = true\r\n        }, 1500)\r\n      },\r\n      onRefreshrestore() {\r\n        this.pullingDistance = 0\r\n        this.resetting = false;\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .list-view {\r\n    flex: 1;\r\n    background-color: #f5f5f5;\r\n  }\r\n\n  .header {\n    justify-content: center;\n    height: 50px;\n    background-color: #f5f5f5;\n    padding: 15px;\n  }\n\r\n  .content-item {\r\n    padding: 15px;\r\n    margin: 5px 0;\r\n    background-color: #fff;\r\n    border-radius: 5px;\r\n  }\r\n\r\n  .text {\r\n    font-size: 14px;\r\n    color: #666;\r\n    line-height: 20px;\r\n  }\r\n</style>\n",null],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAmBO;;;;;;;eAlBL,mBAaY,aAAA,SAbD,WAAM,aAAa,uBAAmB,IAAI,EAAG,yBAAqB,KAAA,kBAAkB,EAC7F,6BAAwB,QAAQ,wBAAkB,KAAA,kBAAkB,EAAG,wBAAkB,KAAA,kBAAkB,EAC1G,wBAAkB,KAAA,gBAAgB,EAAG,yBAAqB,KAAA,kBAAkB,EAAE,iCAA4B;YAE3G,mBAIgB,iBAAA,IAAA,EAAA;gBAHd,mBAEO,QAAA,SAFD,WAAM,WAAQ;oBAClB,mBAA0B,QAAA,IAAA,EAApB;;;YAGV,mBAEY,UAAA,IAAA,EAAA,cAAA,UAAA,CAFW,EAAE,EAAA,IAAP,GAAA,OAAA,SAAC,UAAA,GAAA,CAAA;uBAAnB,mBAEY,aAAA,SAFe,WAAM,iBAAc;oBAC7C,mBAAoC,QAAA,SAA9B,WAAM,SAAO,UAAK,gBAAE,IAAC,CAAA;;;;YAE7B,YAA8F,wBAAA,SAAjF,UAAK,aAAa,WAAO,KAAA,KAAK,EAAG,qBAAiB,KAAA,eAAe;;;;;;;;;;;;aAU1E;aACA;aACA;aACA;oBAIQ,MAAK;;;wBAPb,wBAAoB,KAAK,EACzB,wBAAoB,EAAE,EACtB,qBAAiB,CAAC,EAClB,eAAW,KAAI,sBAIP,MAAK,EAAf,OAAU,MAAK,CAAE;YACf,IAAI,IAAI,CAAC,SAAS,EAAE;gBAClB,OAAO,CAAC;YACV;YACA,IAAI,IAAI,CAAC,kBAAkB,EAAE;gBAC3B,OAAO,CAAA;YACT;YACA,IAAI,IAAI,CAAC,eAAc,GAAI,IAAI,CAAC,kBAAkB,EAAE;gBAClD,OAAO,CAAA;YACT,OAAO;gBACL,OAAO,CAAA;YACT;QACF;;;;aAGA,qBAAA,IAAmB,GAAI,cAAc,EAAE;YAErC,IAAI,CAAC,eAAc,GAAI,EAAE,MAAM,CAAC,EAAC;QACnC;;aACA,qBAAA,MAAqB;YACnB,IAAI,CAAC,kBAAiB,GAAI,IAAG;YAC7B,WAAW,KAAM;gBACf,IAAI,CAAC,kBAAiB,GAAI,KAAI;gBAC9B,IAAI,CAAC,SAAQ,GAAI,IAAG;YACtB;cAAG,IAAI;QACT;;aACA,mBAAA,MAAmB;YACjB,IAAI,CAAC,eAAc,GAAI,CAAA;YACvB,IAAI,CAAC,SAAQ,GAAI,KAAK;QACxB;;;sBAdA,qBAAmB,GAAI;sBAIvB;sBAOA;;;;;;;;;;;;;;;;;;;;;AAKJ"}