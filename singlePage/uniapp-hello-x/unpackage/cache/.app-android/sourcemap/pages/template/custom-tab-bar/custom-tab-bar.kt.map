{"version":3,"sources":["pages/template/custom-tab-bar/custom-tab-bar.uvue","pages/component/unicloud-db-contacts/list.uvue?type=page","uni_modules/uni-upgrade-center-app/components/uni-upgrade-center-app/uni-upgrade-center-app.uvue","pages/template/custom-tab-bar/custom-tab-bar.uvue?type=page"],"sourcesContent":["<template>\n  <view class=\"tabs\">\n    <view ref=\"tabview\" class=\"tab-view\">\n      <!-- 注意tab的逻辑是：第一次使用v-if创建，创建之后不再使用v-if，而是设置visibility来隐藏和显示。不能设置tab的v-if为false，因为销毁再创建影响性能 -->\n      <tab1 ref=\"tab1\" class=\"tab-page\" v-if=\"tabList[0].init\" :style=\"{visibility:(selectedIndex==0?'visible':'hidden')}\"></tab1>\n      <tab2 ref=\"tab2\" class=\"tab-page\" v-if=\"tabList[1].init\" :style=\"{visibility:(selectedIndex==1?'visible':'hidden')}\"></tab2>\n    </view>\n    <view ref=\"tabbar\" class=\"tab-bar\">\n      <view class=\"tab-item\" @click=\"onTabClick(0)\">\n        <view ref=\"tab-item1\" class=\"tab-item-content\">\n          <text v-if=\"displayArrow\" class=\"tab-item-icon tab-item-arrow uni-icon\"\n            :class=\"selectedIndex==0 ? 'tab-item-text-active' : ''\">\n            {{'\\ue6bd'}}\n          </text>\n          <text v-if=\"!displayArrow\" class=\"tab-item-icon uni-icon\"\n            :class=\"selectedIndex==0 ? 'tab-item-text-active' : ''\">{{'\\ue644'}}</text>\n          <text v-if=\"!displayArrow\" class=\"tab-item-text\" :class=\"selectedIndex==0 ? 'tab-item-text-active' : ''\">\n            首页\n          </text>\n        </view>\n      </view>\n      <view>\n        <image class=\"concave-image\" mode=\"heightFix\" src=\"/static/template/custom-tab-bar/concave.png\"></image>\n      </view>\n      <view class=\"tab-item\" @click=\"onTabClick(1)\">\n        <view ref=\"tab-item2\" class=\"tab-item-content\">\n          <text class=\"tab-item-icon uni-icon\"\n            :class=\"selectedIndex==1 ? 'tab-item-text-active' : ''\">{{'\\ue699'}}</text>\n          <text class=\"tab-item-text\" :class=\"selectedIndex==1 ? 'tab-item-text-active' : ''\">\n            我的\n          </text>\n        </view>\n      </view>\n    </view>\n    <view class=\"btn-plus\" @click=\"onPlusClick\">\n      <text class=\"btn-plus-text\">+</text>\n    </view>\n  </view>\n</template>\n\n<script>\n  import tab1 from './custom-tab-bar-tab1.uvue';\n  import tab2 from './custom-tab-bar-tab2.uvue';\n\n  type TabItem = {\n    init : boolean,\n    preload : boolean,\n  }\n\n  export default {\n    components: {\n      tab1,\n      tab2\n    },\n    data() {\n      return {\n        tabList: [\n          {\n            init: true,\n            preload: false\n          } as TabItem,\n          {\n            init: false,\n            preload: false\n          } as TabItem,\n        ] as TabItem[],\n        selectedIndex: 0,\n        displayArrow: false,\n        lastTab1Top:0,\n        tabViewHeight: 0\n      }\n    },\n    onLoad() {\n      uni.$on('tabchange', this.onTabPageEvent) //监听tab1页面发出的tabchange事件，触发到本页面的onTabPageEvent方法。为了判断tab1的scroll-view滚动距离\n    },\n    onReady() {\n      // this.setSelectedIndex(0)\n      this.tabViewHeight = (this.$refs[\"tabview\"] as UniElement).getBoundingClientRect().height\n    },\n    onUnload() {\n      uni.$off('tabchange', this.onTabPageEvent)\n    },\n    methods: {\n      onTabClick(index : number) {\n        if (this.selectedIndex == index && index == 0 && this.displayArrow == true) { //首页当tab按钮变成向上时，点向上就滚动到顶\n          // console.log(\"11\");\n          this.displayArrow = false;\n          (this.$refs[\"tab1\"]! as ComponentPublicInstance).$callMethod('scrollTop', 0)\n          this.lastTab1Top = 0;//Todo: 临时解决android平台scroll-view在某些情况未触发onscroll事件的bug\n        }\n        else if (index !=0){ //不在首页时，把箭头变成图标\n          // console.log(\"22\");\n          this.displayArrow = false\n        }\n        else if (index == 0 && this.selectedIndex !=0){ //从其他tab切回首页时，检查是否需要把图标变箭头\n          // console.log(\"33\",this.lastTab1Top, this.tabViewHeight);\n          this.displayArrow = this.lastTab1Top > this.tabViewHeight\n        }\n        this.setSelectedIndex(index);\n        // console.log('index: ',index);\n        // console.log('this.selectedIndex: ',this.selectedIndex);\n        // console.log('this.displayArrow: ',this.displayArrow);\n        // console.log('this.lastTab1Top: ',this.lastTab1Top);\n      },\n      onTabPageEvent(top : number) {\n        // console.log('top: ',top);\n        this.displayArrow = top > this.tabViewHeight //滚动1屏后，就把第一个tab的图标从首页变成向上箭头\n        this.lastTab1Top = top\n      },\n      setSelectedIndex(index : number) {\n        if (this.selectedIndex === index) {\n          return\n        }\n        if (!this.tabList[index].init) {\n          this.tabList[index].init = true\n        }\n        this.selectedIndex = index\n      },\n      onPlusClick() {\n        uni.showModal({\n          title: \"提示\",\n          content: \"你点击了 +\",\n          showCancel: false\n        })\n      }\n    }\n  }\n</script>\n\n<style>\n  @font-face {\n    font-family: \"UniIcon\";\n    src: url('@/static/fonts/uni-icon.ttf');\n  }\n\n  .uni-icon {\n    font-family: \"UniIcon\";\n    font-size: 16px;\n    font-style: normal;\n  }\n\n  .tabs {\n    flex: 1;\n    background-color: #fff;\n    overflow: visible;\n  }\n\n  .tab-view {\n    flex: 1;\n  }\n\n  .tab-page {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n  }\n\n  .tab-bar {\n    flex-direction: row;\n    height: 56px;\n    overflow: visible;\n  }\n\n  .tab-item {\n    flex: 1;\n    position: relative;\n    background-color: #1e90ff;\n    overflow: visible;\n  }\n\n  .tab-item-content {\n    margin: auto;\n    transition: transform 0.3s;\n  }\n\n  .tab-item-icon {\n    color: #ccc;\n    font-size: 12px;\n    text-align: center;\n    margin-bottom: 4px;\n  }\n\n  .tab-item-text {\n    color: #ccc;\n    font-size: 12px;\n    text-align: center;\n  }\n\n  .tab-item-text-active {\n    color: #fff;\n  }\n\n  .tab-item-arrow {\n    font-size: 30px !important;\n    font-weight: bold;\n  }\n\n  .concave-image {\n    height: 56px;\n  }\n\n  .btn-plus {\n    position: absolute;\n    width: 70px;\n    height: 70px;\n    bottom: 21px;\n    border-radius: 50px;\n    background-color: #FE5722;\n    box-shadow: 0 0 4px rgba(0, 0, 0, 0.5);\n    align-self: center;\n    align-items: center;\n    justify-content: center;\n    overflow: visible;\n  }\n\n  .btn-plus-text {\n    color: #fff;\n    font-size: 32px;\n  }\n</style>\n",null,null,null],"names":[],"mappings":"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"}