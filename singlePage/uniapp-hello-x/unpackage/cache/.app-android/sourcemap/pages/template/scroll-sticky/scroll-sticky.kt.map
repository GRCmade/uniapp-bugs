{"version":3,"sources":["pages/template/scroll-sticky/scroll-sticky.uvue","uni_modules/uni-upgrade-center-app/components/uni-upgrade-center-app/uni-upgrade-center-app.uvue","pages/template/scroll-sticky/scroll-sticky.uvue?type=page"],"sourcesContent":["<template>\r\n\t<scroll-view ref=\"scroll\" @scroll=\"onScroll\" class=\"page\" rebound=\"false\">\r\n\t\t<view class=\"content-item\">\r\n\t\t\t<text class=\"text\">向上滑动页面，体验元素吸顶效果。</text>\r\n\t\t</view>\r\n\t\t<view v-for=\"(item,index) in list\" :key=\"index\" class=\"content-item\">\r\n\t\t\t<text class=\"text\">first content-{{item}}</text>\r\n\t\t</view>\r\n\r\n\t\t<view ref=\"sticky\" class=\"search\">\r\n\t\t\t<view style=\"flex-direction: row;\">\r\n\t\t\t\t<image src=\"/static/template/scroll-fold-nav/search.png\" style=\"width: 15px;\" mode=\"widthFix\"></image>\r\n\t\t\t\t<text class=\"search-tip-text\">请输入你要搜索的内容</text>\r\n\t\t\t</view>\r\n\t\t\t<text class=\"search-btn\">搜索</text>\r\n\t\t</view>\r\n\r\n\t\t<view v-for=\"(item,index) in list\" :key=\"index\" class=\"content-item\">\r\n\t\t\t<text class=\"text\">second content-{{item}}</text>\r\n\t\t</view>\r\n\r\n\t\t<view v-for=\"(item,index) in list\" :key=\"index\" class=\"content-item\">\r\n\t\t\t<text class=\"text\">second content-{{item}}</text>\r\n\t\t</view>\r\n\r\n\t</scroll-view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tlist: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15'],\r\n\t\t\t\tstickyTop: 0,\r\n\t\t\t\tstickyTran: 0,\r\n\t\t\t\tscrollTop: 0,\r\n\t\t\t\tstickyNode: null as UniElement | null\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonScroll(e : ScrollEvent) {\r\n\t\t\t\tif (e.detail.scrollTop > this.stickyTop) {\r\n\t\t\t\t\tlet stickyTran = e.detail.scrollTop - this.stickyTop;\r\n\t\t\t\t\tif (stickyTran != this.stickyTran) {\r\n\t\t\t\t\t\tthis.stickyNode?.style?.setProperty('transform', 'translateY(' + stickyTran + 'px)');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.stickyTran = stickyTran;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.stickyNode?.style?.setProperty('transform', '');\r\n\t\t\t\t\tthis.stickyTran = 0;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tback() {\r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tsuccess(result) {\r\n\t\t\t\t\t\tconsole.log('navigateBack success', result.errMsg)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(error) {\r\n\t\t\t\t\t\tconsole.log('navigateBack fail', error.errMsg)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete(result) {\r\n\t\t\t\t\t\tconsole.log('navigateBack complete', result.errMsg)\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tthis.stickyNode = this.$refs['sticky'] as UniElement;\r\n\t\t\t// let rect = this.stickyNode?.getBoundingClientRect();\r\n\t\t\t// this.stickyTop = rect?.top;\r\n\t\t\t//this.stickyTop = this.stickyNode?.getBoundingClientRect()?.top;\r\n\t\t\tconst stickyRect = (this.$refs['sticky'] as UniElement).getBoundingClientRect();\n      const scrollRect = (this.$refs['scroll'] as UniElement).getBoundingClientRect();\r\n\t\t\tthis.stickyTop = stickyRect.top - scrollRect.top;\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.page {\r\n\t\tflex: 1;\r\n\t\tpadding: 0 15px;\r\n\t\tbackground-color: #f5f5f5;\r\n\t}\r\n\r\n\t.content-item {\r\n\t\tpadding: 15px;\r\n\t\tmargin: 5px 0;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 5px;\r\n\r\n\t}\r\n\r\n\t.text {\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #666;\r\n\t\tline-height: 20px;\r\n\t}\r\n\r\n\t.search {\r\n\t\tbackground-color: #FFFFFF;\r\n\t\tborder: 1px solid #fbdf0d;\r\n\t\theight: 35px;\r\n\t\tborder-radius: 100px;\r\n\t\tmargin: 0 12px;\r\n\t\tpadding: 8px;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tz-index: 100;\r\n\t}\r\n\r\n\t.search-tip-text {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.search-btn {\r\n\t\tfont-size: 12px;\r\n\t\tbackground-color: #ff6900;\r\n\t\tcolor: #FFF;\r\n\t\tpadding: 5px 8px;\r\n\t\tborder-radius: 100px;\r\n\t}\r\n</style>\n",null,null],"names":[],"mappings":"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"}