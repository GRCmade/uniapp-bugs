{"version":3,"sources":["pages/template/scroll-fold-nav/scroll-fold-nav.uvue","uni_modules/uni-upgrade-center-app/utils/call-check-version.ts","uni_modules/uni-upgrade-center-app/components/uni-upgrade-center-app/uni-upgrade-center-app.uvue","App.uvue","pages/template/scroll-fold-nav/scroll-fold-nav.uvue?type=page"],"sourcesContent":["<template>\n  <scroll-view @scroll=\"onScroll\" class=\"page\" show-scrollbar=\"false\">\n    <view ref=\"seatbar\" class=\"seatbar\"></view>\n\n    <view class=\"content\">\n      <view class=\"content-item\">\n        <text class=\"text\">1. 当前示例监听了 scroll-view 的 scroll 事件 ，滚动页面实时监听scrollTop。</text>\n        <text class=\"text\">2. 使用 ref 直接获取元素的节点，并在 scroll 事件中通过节点的 setProperty\n          方法来修改搜索导航栏的高度、位置和背景颜色等样式，从而达到滚动折叠的效果。</text>\n        <text class=\"text\">3. 请向上\\向下滚动页面观察效果。</text>\n      </view>\n      <view class=\"content-item\" v-for=\"(item,index) in 20\" :key=\"index\">\n        <text class=\"text\">content-{{item}}</text>\n      </view>\n    </view>\n\n    <view ref=\"navigatorbar\" class=\"navigatorbar\">\n      <view class=\"titlebar\">\n        <view class=\"backview\" @tap=\"back\">\n          <image class=\"back\" src=\"/static/template/scroll-fold-nav/back.png\" mode=\"widthFix\"></image>\n        </view>\n        <text ref=\"title\" class=\"title\">DCloud 为开发者而生</text>\n      </view>\n      <view ref=\"searchbar\" class=\"searchbar\" @tap=\"search\">\n        <image class=\"searchimg\" src=\"/static/template/scroll-fold-nav/search.png\" mode=\"widthFix\"></image>\n        <text class=\"searchinput\">请输入你要搜索的内容</text>\n        <text class=\"searchbutton\">搜索</text>\n      </view>\n    </view>\n  </scroll-view>\n</template>\n\n<script>\n  //导航栏高度\n  const NAVIBARHEIGHT = 88;\n  //搜索栏高度\n  const SEARCHBARHEIGHT = 40;\n  //返回键按钮宽度\n  const BACKWIDTH = 32;\n  export default {\n    data() {\n      return {\n        statusBarHeight: 0,\n        nviBarHeight: 0,\n        naviElement: null as UniElement | null,\n        titleElement: null as UniElement | null,\n        searchElement: null as UniElement | null\n      }\n    },\n    onLoad() {\n\n      this.statusBarHeight = uni.getSystemInfoSync().statusBarHeight;\n\n      this.nviBarHeight = NAVIBARHEIGHT + this.statusBarHeight;\n    },\n    onReady() {\n      this.naviElement = this.$refs['navigatorbar'] as UniElement;\n      this.searchElement = this.$refs['searchbar'] as UniElement;\n      this.titleElement = this.$refs['title'] as UniElement;\n      //适配不同状态栏高度\n      this.naviElement?.style?.setProperty('padding-top', this.statusBarHeight+'px');\n      this.naviElement?.style?.setProperty('height', (NAVIBARHEIGHT+this.statusBarHeight)+'px');\n      let seatElement = this.$refs['seatbar'] as UniElement;\n      seatElement.style.setProperty('height', (NAVIBARHEIGHT+this.statusBarHeight)+'px');\n    },\n    methods: {\n      onScroll(e : ScrollEvent) {\n        let offset = e.detail.scrollTop>SEARCHBARHEIGHT?SEARCHBARHEIGHT:e.detail.scrollTop;//(e.detail.scrollTop<0?0:e.detail.scrollTop)\n        this.naviElement?.style?.setProperty('height', (this.nviBarHeight -offset)+'px');\n        this.titleElement?.style?.setProperty('opacity', (1-offset/SEARCHBARHEIGHT));\n        this.searchElement?.style?.setProperty('left', ((offset<0)?0:BACKWIDTH*offset/SEARCHBARHEIGHT)+'px');\n      },\n      back() {\n        uni.navigateBack();\n      },\n      search() {\n        uni.showToast({\n          title: '暂不支持',\n          icon: 'none'\n        });\n      }\n    }\n  }\n</script>\n\n<style>\n.page {\n  flex: 1;\n  background-color: #f5f5f5;\n}\n.navigatorbar {\n  position: fixed;\n\n  padding-top: 35px;\n  height: 124px;\n\n\n\n\n  border-bottom: 1px solid #efefef;\n  width: 100%;\n  background-color: #f5f5f5;\n}\n.titlebar {\n  flex-direction: row;\n  align-items: center;\n  height: 44px;\n}\n.backview {\n  width: 44px;\n  height: 44px;\n  justify-content: center;\n  align-items: center;\n}\n.back {\n  width: 20px;\n}\n.title {\n  margin: 0px 2px;\n}\n.searchbar {\n  position: absolute;\n  bottom: 2px;\n  left: 0px;\n  right: 0px;\n  background-color: #FFFFFF;\n  border: 1px solid #fbdf0d;\n  height: 32px;\n  border-radius: 100px;\n  margin: 6px 12px;\n  padding: 8px;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n}\n.searchimg {\n  width: 15px;\n}\n.searchinput {\n  flex-grow: 1;\n  font-size: 12px;\n  color: #666;\n}\n.searchbutton {\n  font-size: 12px;\n  background-color: #ff6900;\n  color: #FFF;\n  padding: 5px 8px;\n  border-radius: 100px;\n}\n.seatbar {\n\n  height: 124px;\n\n\n\n\n}\n.content {\n  padding: 5px 15px;\n}\n.content-item {\n  padding: 15px;\n  margin: 5px 0;\n  background-color: #fff;\n  border-radius: 5px;\n}\n.text {\n  font-size: 14px;\n  color: #666;\n  line-height: 20px;\n}\n\n</style>\n",null,null,null,null],"names":[],"mappings":"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"}