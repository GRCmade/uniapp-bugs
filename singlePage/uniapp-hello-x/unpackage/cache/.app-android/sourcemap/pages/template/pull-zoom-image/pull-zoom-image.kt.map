{"version":3,"sources":["pages/template/pull-zoom-image/pull-zoom-image.uvue","uni_modules/uni-upgrade-center-app/components/uni-upgrade-center-app/uni-upgrade-center-app.uvue","pages/template/pull-zoom-image/pull-zoom-image.uvue?type=page"],"sourcesContent":["<template>\n  <view @click=\"back\" class=\"nav-back\">\n    <image class=\"back-img\" src=\"/static/template/pull-zoom-image/back.png\" mode=\"widthFix\"></image>\n  </view>\n  <scroll-view style=\"flex:1;\" :refresher-enabled=\"true\"\n    refresher-default-style=\"none\" @refresherpulling=\"onRefresherpulling\"\n    :refresher-threshold=\"300\" :refresher-max-drag-distance=\"299\"\n    @scroll=\"onScroll\" :rebound=\"false\"\n    >\n    <view class=\"head-img-box-2\" ref=\"head-img-box-2\">\n      <image class=\"img\" ref=\"head-img-2\" src=\"../../../static/template/pull-zoom-image/head-img.jpg\" mode=\"scaleToFill\"></image>\n    </view>\n    <view class=\"user-info\" ref=\"user-info\">\n      <image class=\"user-avatar\" src=\"../../../static/test-image/logo.png\" mode=\"widthFix\"></image>\n      <view class=\"font-box\">\n        <text class=\"username\">uni-app-x</text>\n        <text class=\"slogan\">一次开发，多端覆盖</text>\n      </view>\n    </view>\n    <view class=\"list-box\">\n      <view class=\"item\" v-for=\"(item,index) in 30\" :key=\"index\">\n        <text class=\"text\">{{item}}. 占位</text>\n      </view>\n    </view>\n\n\n    <view slot=\"refresher\">\n      <view class=\"head-img-box-1\">\n        <image class=\"img\" ref=\"head-img-1\" src=\"/static/template/pull-zoom-image/head-img.jpg\" mode=\"scaleToFill\"></image>\n      </view>\n    </view>\n\n\n  </scroll-view>\n</template>\n\n<script>\n  export default {\n    data() {\n      return {\n        $elementMap: new Map<string, UniElement>()\n      }\n    },\n    methods: {\n      onScroll(e : ScrollEvent) {\n        const {scrollTop} = e.detail\n        let y : number = scrollTop - 110\n        let s : number = (100 - scrollTop/3)/100\n        if(y < 0){\n          y = 0\n        }\n        if(s < 0.7){\n          s = 0.7\n        }\n        let x : number = (1 - s) * -100\n        this.setElementStyle(\"user-info\", \"transform\", `translate(${x}px, ${y + (s-1)* -50}px) scale(${s})`)\n        this.setElementStyle(\"head-img-box-2\", \"transform\", `translateY(${y}px)`)\n      },\n      onRefresherpulling(e : RefresherEvent) {\n        // console.log('onRefresherpulling',e.detail.dy)\n        let pullingDistance : number = e.detail.dy\n        this.setElementStyle(\"head-img-1\", 'transform', `scale(${pullingDistance / 200 + 1})`)\n        this.setElementStyle(\"head-img-2\", 'transform', `scale(${pullingDistance / 200 + 1})`)\n      },\n      // 工具方法，用于快速设置 Element 的 style\n      setElementStyle(refName : string, propertyName : string, propertyStyle : any) : void {\n        let element : UniElement | null = (this.$data['$elementMap'] as Map<string, UniElement>).get(refName)\n        if (element == null) {\n          element = this.$refs[refName] as UniElement;\n          (this.$data['$elementMap'] as Map<string, UniElement>).set(refName, element)\n        }\n        element.style.setProperty(propertyName, propertyStyle);\n      },\n      back() {\n        uni.navigateBack({\n          success(result) {\n            console.log('navigateBack success', result.errMsg)\n          },\n          fail(error) {\n            console.log('navigateBack fail', error.errMsg)\n          },\n          complete(result) {\n            console.log('navigateBack complete', result.errMsg)\n          }\n        })\n      }\n    }\n  }\n</script>\n\n<style>\n  .head-img-box-1,\n  .head-img-box-2\n  {\n    position: relative;\n    height: 300px;\n  }\n\n  .head-img-box-1 .img,\n  .head-img-box-2 .img\n  {\n    position: absolute;\n    left: -125rpx;\n    width: 1000rpx;\n    height: 600px;\n  }\n\n  .head-img-box-1 .img {\n    top: 0;\n  }\n\n  .head-img-box-2 .img {\n    bottom: -100;\n  }\n\n  .head-img-box-2 {\n    z-index: 9;\n    height: 200px;\n  }\n\n  .user-info{\n    margin-top: -110px;\n    width: 750rpx;\n    padding: 15px;\n    flex-direction: row;\n    z-index: 10;\n  }\n\n  .user-info .user-avatar {\n    width: 75px;\n    height: 75px;\n    border-radius: 100px;\n    border: 3px solid #FFF;\n  }\n\n  .user-info .font-box {\n    flex-direction: column;\n    justify-content: space-around;\n    padding: 10px;\n  }\n\n  .user-info .username {\n    font-size: 26px;\n    color: #FFF;\n  }\n\n  .user-info .slogan {\n    font-size: 16px;\n    color: #FFF;\n  }\n\n\n  .list-box {\n    background-color: #FFF;\n    z-index: 1;\n  }\n\n  .list-box .item {\n    padding: 10px;\n    margin: 5px;\n    border-radius: 5px;\n    border: 1px solid rgba(220, 220, 220, 0.3);\n  }\n\n  .list-box .text {\n    font-size: 14px;\n    color: #666;\n    line-height: 20px;\n  }\n\n  .nav-back {\n    position: absolute;\n    top: 30px;\n    left: 10px;\n    border-radius: 100px;\n    width: 28px;\n    height: 28px;\n    justify-content: center;\n    align-items: center;\n    z-index: 10;\n  }\n\n  .nav-back .back-img {\n    width: 18px;\n    height: 18px;\n  }\n</style>\n",null,null],"names":[],"mappings":"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"}