{"version":3,"sources":["pages/API/theme-change/theme-change.uvue","pages/API/get-system-info/get-system-info.uvue?type=page","pages/API/theme-change/theme-change.uvue?type=page","App.uvue"],"sourcesContent":["<template>\n  <view class=\"uni-padding-wrap\">\n    <view class=\"uni-common-mt item-box\">\n      <text>osTheme:</text>\n      <text id=\"theme\">{{ osTheme }}</text>\n    </view>\n    <view class=\"uni-common-mt item-box\">\n      <text>应用当前主题:</text>\n      <text id=\"theme\">{{ appTheme }}</text>\n    </view>\n\n    <view>\n      <view class=\"uni-title uni-common-mt\">\n        <text class=\"uni-title-text\"> 修改appTheme主题（此处仅为演示API，本应用并未完整适配暗黑模式） </text>\n      </view>\n    </view>\n    <view class=\"uni-list uni-common-pl\">\n      <radio-group @change=\"radioChange\" class=\"radio-group\">\n        <radio class=\"uni-list-cell uni-list-cell-pd radio\" v-for=\"(item, index) in items\" :key=\"item\"\n          :class=\"index < items.length - 1 ? 'uni-list-cell-line' : ''\" :value=\"item\"\n          :checked=\"index === current\">\n          {{ item }}\n        </radio>\n      </radio-group>\n    </view>\n\n  </view>\n</template>\n\n<script>\n  export default {\n    data() {\n      return {\n        osThemeChangeId: 0,\n        appThemeChangeId: 0,\n        osTheme: \"light\" as string,\n        appTheme: \"light\" as string,\n        originalTheme: \"light\" as string,\n        current: 0,\n        items: [\n          \"light\",\n          \"dark\",\n          \"auto\"\n        ] as string[]\n      }\n    },\n    methods: {\n      bindOsThemeChange(): number {\n        //注册osTheme变化监听\n        return uni.onOsThemeChange((res: OsThemeChangeResult)=> {\n          this.osTheme = res.osTheme\n        })\n      },\n      bindAppThemeChange(): number {\n        //注册appTheme变化监听\n        return uni.onAppThemeChange((res: AppThemeChangeResult) => {\n          this.appTheme = res.appTheme\n        })\n      },\n      radioChange(e : UniRadioGroupChangeEvent) {\n        const theme = e.detail.value\n        this.setAppTheme(theme)\n        uni.showToast({\n          icon: 'none',\n          title: '当前选中:'+theme,\n        })\n      },\n      setAppTheme(value: string) {\n        uni.setAppTheme({\n          theme: value,\n          success: function() {\n            console.log(\"设置appTheme为\", value, \"成功\")\n          },\n          fail: function(e: IAppThemeFail) {\n            console.log(\"设置appTheme为\", value, \"失败,原因:\", e.errMsg)\n          }\n        })\n      }\n    },\n    onReady() {\n      uni.getSystemInfo({\n        success: (res:GetSystemInfoResult) => {\n          this.osTheme = res.osTheme!\n          this.originalTheme = res.appTheme!\n          this.appTheme = res.appTheme == \"auto\" ? res.osTheme! : res.appTheme!\n          this.current = this.items.indexOf(res.appTheme!)\n        }\n      })\n      this.osThemeChangeId = this.bindOsThemeChange()\n      this.appThemeChangeId = this.bindAppThemeChange()\n    },\n    onUnload() {\n      //注销监听\n      uni.offAppThemeChange(this.appThemeChangeId)\n      uni.offOsThemeChange(this.osThemeChangeId)\n      uni.showToast({\n        \"position\":\"bottom\",\n        \"title\":\"已停止监听主题切换\"\n      })\n    }\n  }\n</script>\n\n<style>\n  .item-box {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n  }\n  .uni-list-cell {\n    justify-content: flex-start;\n  }\n</style>\n",null,null,null],"names":[],"mappings":"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"}