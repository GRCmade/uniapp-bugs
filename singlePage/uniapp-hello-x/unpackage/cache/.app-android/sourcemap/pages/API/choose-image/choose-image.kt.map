{"version":3,"sources":["pages/API/choose-image/choose-image.uvue","pages/API/upload-file/upload-file.uvue?type=page","pages/API/preview-image/preview-image.uvue?type=page","pages/API/navigator/new-page/onLoad.uvue?type=page","App.uvue","pages/API/choose-image/choose-image.uvue?type=page"],"sourcesContent":["<template>\n\n  <scroll-view class=\"page-scroll-view\">\n\n    <view>\n      <page-head :title=\"title\"></page-head>\n      <view class=\"uni-common-mt\">\n        <view class=\"uni-list\">\n          <view class=\"uni-list-cell cell-pd\">\n            <view class=\"uni-list-cell-left uni-label\">\n              图片来源\n            </view>\n            <view class=\"uni-list-cell-right\" @click=\"chooseImageSource\">\n              <text class=\"click-t\">{{sourceType[sourceTypeIndex]}}</text>\n            </view>\n          </view>\n\n          <view class=\"uni-list-cell cell-pd\">\n            <view class=\"uni-list-cell-left uni-label\">\n              图片质量\n            </view>\n            <view class=\"uni-list-cell-right\" @click=\"chooseImageType\">\n              <text class=\"click-t\">{{sizeType[sizeTypeIndex]}}</text>\n            </view>\n          </view>\n\n          <view class=\"uni-list-cell cell-pd\">\n            <view class=\"uni-list-cell-left uni-label\">\n              数量限制\n            </view>\n            <view class=\"uni-list-cell-right\">\n              <input class=\"click-t\" :value=\"countIndex+1\" type=\"number\" :maxlength=\"1\" @confirm=\"chooseImageCount\" confirm-type=\"done\" />\n            </view>\n          </view>\n          <view class=\"uni-list-cell cell-pd\">\n            <view class=\"uni-list-cell-left uni-label\">\n              图像裁剪\n            </view>\n            <view class=\"uni-list-cell-right\">\n              <switch :checked=\"isCrop\" @change=\"switchCrop\"></switch>\n            </view>\n          </view>\n          <view ref=\"cropOptionNode\" class=\"crop-option\" :style=\"{'height':isCrop?'200px':'0px','margin-bottom':isCrop?'11px':'0px'}\">\n            <view class=\"uni-list-cell cell-pd\">\n              <view class=\"uni-list-cell-left item_width\">\n                图片质量(%)\n              </view>\n              <view class=\"uni-list-cell-right\">\n                <input :value=\"cropPercent\" @confirm=\"cropPercentConfim\" type=\"number\" maxlength=\"-1\"/>\n              </view>\n            </view>\n            <view class=\"uni-list-cell cell-pd\">\n              <view class=\"uni-list-cell-left item_width\">\n                裁剪宽度(px)\n              </view>\n              <view class=\"uni-list-cell-right\">\n                <input :value=\"cropWidth\" @confirm=\"cropWidthConfim\" type=\"number\" maxlength=\"-1\"/>\n              </view>\n            </view>\n            <view class=\"uni-list-cell cell-pd\">\n              <view class=\"uni-list-cell-left item_width\">\n                裁剪高度(px)\n              </view>\n              <view class=\"uni-list-cell-right\">\n                <input :value=\"cropHeight\" @confirm=\"cropHeightConfim\" type=\"number\" maxlength=\"-1\"/>\n              </view>\n            </view>\n            <view class=\"uni-list-cell cell-pd\">\n              <view class=\"uni-list-cell-left item_width\">\n                保留原宽高\n              </view>\n              <view class=\"uni-list-cell-right\">\n                <switch :checked=\"cropResize\" @change=\"cropResizeChange\"></switch>\n              </view>\n            </view>\n          </view>\n        </view>\n\n        <view class=\"uni-list list-pd\" style=\"padding: 15px;\">\n          <view class=\"uni-flex\" style=\"margin-bottom: 10px;\">\n            <view class=\"uni-list-cell-left\">点击可预览选好的图片</view>\n            <view style=\"margin-left: auto;\">\n              <text class=\"click-t\">{{imageList.length}}/{{countIndex+1}}</text>\n            </view>\n          </view>\n          <view class=\"uni-flex\" style=\"flex-wrap: wrap;\">\n            <view v-for=\"(image,index) in imageList\" :key=\"index\" class=\"uni-uploader__input-box\" style=\"border: 0;\">\n              <image style=\"width: 104px; height: 104px;\" :src=\"image\" :data-src=\"image\" @tap=\"previewImage(index)\">\n              </image>\n              <image src=\"/static/plus.png\" class=\"image-remove\" @click=\"removeImage(index)\"></image>\n            </view>\n            <image class=\"uni-uploader__input-box\" @tap=\"chooseImage\" src=\"/static/plus.png\"></image>\n          </view>\n        </view>\n      </view>\n    </view>\n\n  </scroll-view>\n\n</template>\n\n<script>\n  var sourceTypeArray = [\n    ['camera'],\n    ['album'],\n    ['camera', 'album']\n  ]\n  var sizeTypeArray = [\n    ['compressed'],\n    ['original'],\n    ['compressed', 'original']\n  ]\n  export default {\n    data() {\n      return {\n        title: 'chooseImage',\n        imageList: [] as Array<string>,\n        sourceTypeIndex: 2,\n        sourceType: ['拍照', '相册', '拍照或相册'],\n        sizeTypeIndex: 2,\n        sizeType: ['压缩', '原图', '压缩或原图'],\n        countIndex: 8,\n        count: [1, 2, 3, 4, 5, 6, 7, 8, 9],\n        isCrop: false,\n        cropPercent: 80,\n        cropWidth: 100,\n        cropHeight: 100,\n        cropResize: false\n      }\n    },\n    onUnload() {\n      this.imageList = [];\n      this.sourceTypeIndex = 2\n      this.sourceType = ['拍照', '相册', '拍照或相册']\n      this.sizeTypeIndex = 2\n      this.sizeType = ['压缩', '原图', '压缩或原图']\n      this.countIndex = 8\n    },\n    methods: {\n      cropHeightConfim(e : InputConfirmEvent) {\n        let value = parseInt(e.detail.value)\n        if (value > 0) {\n          this.cropHeight = value\n        } else {\n          uni.showToast({\n            position: \"bottom\",\n            title: \"裁剪高度需要大于0\"\n          })\n        }\n      },\n      cropWidthConfim(e : InputConfirmEvent) {\n        let value = parseInt(e.detail.value)\n        if (value > 0) {\n          this.cropWidth = value\n        } else {\n          uni.showToast({\n            position: \"bottom\",\n            title: \"裁剪宽度需要大于0\"\n          })\n        }\n      },\n      cropPercentConfim(e : InputConfirmEvent) {\n        let value = parseInt(e.detail.value)\n        if (value > 0 && value <= 100) {\n          this.cropPercent = value\n        } else {\n          uni.showToast({\n            position: \"bottom\",\n            title: \"请输入0~100之间的值\"\n          })\n        }\n      },\n      cropResizeChange(e : UniSwitchChangeEvent) {\n        this.cropResize = e.detail.value\n      },\n      switchCrop(e : UniSwitchChangeEvent) {\n        this.isCrop = e.detail.value\n      },\n      removeImage(index : number) {\n        this.imageList.splice(index, 1)\n      },\n      chooseImageSource() {\n        uni.showActionSheet({\n          itemList: ['拍照', '相册', '拍照或相册'],\n          success: (e) => {\n            this.sourceTypeIndex = e.tapIndex!\n          }\n        })\n      },\n      chooseImageType() {\n        uni.showActionSheet({\n          itemList: ['压缩', '原图', '压缩或原图'],\n          success: (e) => {\n            this.sizeTypeIndex = e.tapIndex!\n          }\n        })\n      },\n      chooseImageCount(event : InputConfirmEvent) {\n        let count = parseInt(event.detail.value) - 1\n        if (count < 0) {\n          uni.showToast({\n            position: \"bottom\",\n            title: \"图片数量应该大于0\"\n          })\n          return\n        }\n        this.countIndex = count\n      },\n      chooseImage: function () {\n        // var cropOption:ChooseImageCropOptions|null = this.isCrop ? null : new ChooseImageCropOptions(  )\n        if (this.imageList.length >= 9) {\n          uni.showToast({\n            position: \"bottom\",\n            title: \"已经有9张图片了，请删除部分图片之后重新选择\"\n          })\n          return\n        }\n        uni.chooseImage({\n          sourceType: sourceTypeArray[this.sourceTypeIndex],\n          sizeType: sizeTypeArray[this.sizeTypeIndex],\n          crop: this.isCrop ? { \"quality\": this.cropPercent, \"width\": this.cropWidth, \"height\": this.cropHeight, \"resize\": this.cropResize } as ChooseImageCropOptions : null,\n          count: this.imageList.length + this.count[this.countIndex] > 9 ? 9 - this.imageList.length : this.count[this.countIndex],\n          success: (res) => {\n            this.imageList = this.imageList.concat(res.tempFilePaths);\n          },\n          fail: (err) => {\n            console.log(\"err: \", JSON.stringify(err));\n          }\n        })\n      },\n      previewImage: function (index : number) {\n        uni.previewImage({\n          current: index,\n          urls: this.imageList\n        })\n      }\n    }\n  }\n</script>\n\n<style>\n  .cell-pd {\n    padding: 11px 15px;\n  }\n\n  .click-t {\n    color: darkgray;\n  }\n\n  .list-pd {\n    margin-top: 25px;\n  }\n\n  .uni-uploader__input-box {\n    margin: 5px;\n    width: 104px;\n    height: 104px;\n    border: 1px solid #D9D9D9;\n  }\n\n  .uni-uploader__input {\n    position: absolute;\n    z-index: 1;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    opacity: 0;\n  }\n\n  .image-remove {\n    transform: rotate(45deg);\n    width: 25px;\n    height: 25px;\n    position: absolute;\n    top: 0;\n    right: 0;\n    border-radius: 13px;\n    background-color: rgba(200, 200, 200, 0.8);\n  }\n\n  .item_width {\n    width: 130px;\n  }\n\n  .crop-option {\n    margin-left: 11px;\n    margin-right: 11px;\n    border-radius: 11px;\n    background-color: #eee;\n    transition-property: height, margin-bottom;\n    transition-duration: 200ms;\n  }\n</style>\n",null,null,null,null,null],"names":[],"mappings":"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"}