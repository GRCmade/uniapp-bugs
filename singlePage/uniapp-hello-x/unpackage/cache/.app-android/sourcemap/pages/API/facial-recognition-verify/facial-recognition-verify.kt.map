{"version":3,"sources":["pages/API/facial-recognition-verify/facial-recognition-verify.uvue","pages/API/facial-recognition-verify/facial-recognition-verify.uvue?type=page","uni_modules/uni-upgrade-center-app/components/uni-upgrade-center-app/uni-upgrade-center-app.uvue"],"sourcesContent":["<template>\n\n  <scroll-view class=\"page-scroll-view\">\n\n    <view>\n      <page-head :title=\"title\"></page-head>\n      <view class=\"uni-padding-wrap uni-common-mt\">\n        <view class=\"uni-btn-v uni-common-mt\">\n          <input class=\"uni-input\" type=\"text\" v-model=\"realName\" name=\"real-name\"\n            placeholder=\"姓名\" maxlength=\"-1\"/>\n        </view>\n        <view class=\"uni-btn-v uni-common-mt\">\n          <input class=\"uni-input\" type=\"text\" v-model=\"idCard\" name=\"id-card\"\n            placeholder=\"身份证号\" maxlength=\"-1\"/>\n        </view>\n        <view class=\"uni-btn-v uni-common-mt\">\n          <button type=\"primary\" @click=\"facialRecognition\">开始人脸识别</button>\n        </view>\n      </view>\n    </view>\n\n  </scroll-view>\n\n</template>\n\n<script>\n  export default {\n    data() {\n      return {\n        title: '实人认证',\n        realName: '',\n        idCard: ''\n      }\n    },\n    onReady() {\n    },\n    methods: {\n      facialRecognition() {\n        const realName = this.realName.trim()\n        const idCard = this.idCard.trim()\n        if (realName == '' || idCard == '') {\n          uni.showModal({\n            title: '错误',\n            content: '姓名和身份证号不可为空',\n            showCancel: false\n          })\n          return\n        }\n        const testFacialCo = uniCloud.importObject('facial-recognition-co')\n        let metaInfo = uni.getFacialRecognitionMetaInfo();\n        testFacialCo.getCertifyId({\n          realName,\n          idCard,\n          metaInfo\n        })\n          .then((res : UTSJSONObject) : Promise<string> => {\n            const certifyId = res['certifyId'] as string\n            return new Promise((\n              resolve : (res : string) => void,\n              reject : (err : Error) => void\n            ) => {\n              uni.startFacialRecognitionVerify({\n                certifyId,\n                success() {\n                  resolve(certifyId)\n                },\n                fail(err) {\n                  reject(new Error(err.errMsg))\n                }\n              })\n            })\n          })\n          .then((certifyId : string) : Promise<UTSJSONObject> => {\n            return testFacialCo.getAuthResult(certifyId)\n          })\n          .then((res : UTSJSONObject) => {\n            console.log('res', res)\n          })\n          .catch((err : any | null) => {\n            console.error('error', err)\n          })\n      }\n    }\n  }\n</script>\n\n<style>\n</style>\n",null,null],"names":[],"mappings":";;;;;;;;;;;;;;;;;+BAiD2B;;+BAYT;AAnCX;;gBAQH,MAAU,CACV;;;;;;;eAjCF,mBAmBc,eAAA,SAnBD,WAAM,qBAAkB;YAEnC,mBAeO,QAAA,IAAA,EAAA;gBAdL,YAAsC,sBAAA,SAA1B,WAAO,KAAA,KAAK,GAAA,IAAA,EAAA,CAAA,EAAA;oBAAA;iBAAA;gBACxB,mBAYO,QAAA,SAZD,WAAM,mCAAgC;oBAC1C,mBAGO,QAAA,SAHD,WAAM,4BAAyB;wBACnC,mBACmC,SAAA,SAD5B,WAAM,aAAY,UAAK,wBAAgB,KAAA,QAAQ;4BAAR,KAAA,QAAQ,GAAA,SAAA,MAAA,CAAA,KAAA;wBAAA;0BAAE,UAAK,aAC3D,iBAAY,MAAK,eAAU;;;;;oBAE/B,mBAGO,QAAA,SAHD,WAAM,4BAAyB;wBACnC,mBACqC,SAAA,SAD9B,WAAM,aAAY,UAAK,wBAAgB,KAAA,MAAM;4BAAN,KAAA,MAAM,GAAA,SAAA,MAAA,CAAA,KAAA;wBAAA;0BAAE,UAAK,WACzD,iBAAY,QAAO,eAAU;;;;;oBAEjC,mBAEO,QAAA,SAFD,WAAM,4BAAyB;wBACnC,mBAAiE,UAAA,SAAzD,UAAK,WAAW,aAAO,KAAA,iBAAiB,GAAE,UAAM,CAAA,EAAA;4BAAA;yBAAA;;;;;;aAa1D;aACA;aACA;;;wBAFA,WAAO,QACP,cAAU,IACV,YAAQ;;;aAMV,oBAAA,MAAoB;YAClB,IAAM,WAAW,IAAI,CAAC,QAAQ,CAAC,IAAI;YACnC,IAAM,SAAS,IAAI,CAAC,MAAM,CAAC,IAAI;YAC/B,IAAI,YAAY,MAAM,UAAU,IAAI;gBAClC,+BACE,QAAO,MACP,UAAS,eACT,aAAY,KAAI;gBAElB;YACF;YACA,IAAM,eAAe,SAAS,YAAY,CAAC;YAC3C,IAAI,WAAW;YACf,aAAa,YAAY,eAAC;;oBACxB;oBAAA;;;oBACA;oBAAA;;;oBACA;oBAAA;;iBAEC,IAAI,CAAC,IAAC,KAAM,gBAAiB,WAAQ,MAAM,EAAK;gBAC/C,IAAM,YAAY,GAAG,CAAC,YAAW,CAAE,EAAC,CAAE,MAAK;gBAC3C,OAAO,AAAI,WAAQ,IACjB,UAAW,KAAM,MAAM,KAAK,IAAI,EAChC,SAAU,KAAM,aAAU,IAAG,CAC1B;oBACH,qEACE,YAAA,WACA,UAAA,OAAU;wBACR,QAAQ;oBACV;sBACA,OAAA,IAAK,GAAG,EAAE;wBACR,OAAO,AAAI,SAAM,IAAI,MAAM;oBAC7B;;gBAEJ;;YACF;cACC,IAAI,CAAC,IAAC,WAAY,MAAM,GAAI,WAAQ,eAAkB;gBACrD,OAAO,aAAa,aAAa,CAAC;YACpC;cACC,IAAI,CAAC,IAAC,KAAM,cAAkB;gBAC7B,QAAQ,GAAG,CAAC,OAAO,KAAG;YACxB;cACC,OAAK,CAAC,IAAC,KAAM,GAAE,EAAa;gBAC3B,QAAQ,KAAK,CAAC,SAAS,KAAG;YAC5B;;QACJ;;;sBA5CA;;;;;;;;;;;;;;;AA8CJ"}