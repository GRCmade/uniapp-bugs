{"version":3,"sources":["pages/API/resize-observer/resize-observer.uvue","pages/component/list-view/list-view-multiplex.uvue?type=page","pages/API/resize-observer/resize-observer.uvue?type=page"],"sourcesContent":["<template>\r\n  <view>\r\n    <text>点击蓝色或红色方块区域会修改元素宽高</text>\r\n    <view v-show=\"boxDisplay\" style=\"align-items: center; justify-content: center; margin: 10px;\">\r\n      <view\r\n        style=\"width: 140px; height: 140px; background-color: blue; align-items: center; justify-content: center; padding: 5px;\"\r\n        id=\"outBox\" @click=\"outBoxClick\">\r\n        <view style=\"width: 80px; height: 80px; background-color: red; padding: 5px;\" id=\"innerBox\"\r\n          @click=\"innerBoxClick\"></view>\r\n      </view>\r\n    </view>\r\n    <button @click=\"revertBoxSize\">还原修改前元素宽高</button>\r\n    <button @click=\"toggleDisplay\">{{boxDisplay? '隐藏元素': '显示元素'}}</button>\n    <button @click='cancelListen'>停止监听</button>\r\n    <button @click='goOnListen'>恢复监听</button>\r\n    <view>\r\n      <text class=\"info-text\">蓝色方块元素:</text>\r\n      <view class=\"info-item\">\r\n        <text class=\"info-text\">{{outBoxSizeInfo}}</text>\r\n      </view>\r\n      <text class=\"info-text\" style=\"margin-top: 20px;\">红色方块元素:</text>\r\n      <view class=\"info-item\">\r\n        <text class=\"info-text\">{{innerBoxSizeInfo}}</text>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        outBoxSizeInfo: \"\",\r\n        innerBoxSizeInfo: \"\",\r\n        offset: 2,\r\n        boxDisplay: false,\r\n        outBoxElement: null as UniElement | null,\r\n        innerBoxElement: null as UniElement | null,\r\n        resizeObserver: null as UniResizeObserver | null,\r\n        outBoxElementOnResize: false\r\n      }\r\n    },\r\n    onBackPress() : boolean {\r\n      if (this.resizeObserver != null) {\r\n        this.resizeObserver!.disconnect()\r\n      }\r\n      return false\r\n    },\r\n    onReady() {\r\n      if (this.resizeObserver == null) {\r\n        this.resizeObserver = new UniResizeObserver((entries : Array<UniResizeObserverEntry>) => {\r\n\r\n          entries.forEach(entry => {\r\n            if (entry.target == this.outBoxElement) {\r\n              this.outBoxSizeInfo = this.analysisResizeObserverEntry(entry)\r\n              this.outBoxElementOnResize = true\r\n            } else if (entry.target == this.innerBoxElement) {\r\n              this.innerBoxSizeInfo = this.analysisResizeObserverEntry(entry)\r\n            }\r\n          })\r\n        })\r\n        this.outBoxElement = uni.getElementById(\"outBox\")\r\n        if (this.outBoxElement != null) {\r\n          this.resizeObserver!.observe(this.outBoxElement!)\r\n        }\r\n        this.innerBoxElement = uni.getElementById(\"innerBox\")\r\n        if (this.innerBoxElement != null) {\r\n          this.resizeObserver!.observe(this.innerBoxElement!)\r\n        }\r\n        this.boxDisplay = true\r\n      }\r\n    },\r\n    methods: {\r\n      innerBoxClick() {\r\n        if (this.innerBoxElement != null) {\r\n          this.innerBoxElement!.style.setProperty(\"width\", this.innerBoxElement!.offsetWidth + this.offset + 'px')\r\n          this.innerBoxElement!.style.setProperty(\"height\", this.innerBoxElement!.offsetWidth + this.offset + 'px')\r\n        }\r\n      },\r\n      outBoxClick() {\r\n        if (this.outBoxElement != null) {\r\n          this.outBoxElement!.style.setProperty(\"width\", this.outBoxElement!.offsetWidth + this.offset + 'px')\r\n          this.outBoxElement!.style.setProperty(\"height\", this.outBoxElement!.offsetWidth + this.offset + 'px')\r\n        }\r\n      },\r\n      revertBoxSize() {\r\n        if (this.outBoxElement != null) {\r\n          this.outBoxElement!.style.setProperty(\"width\", \"140px\")\r\n          this.outBoxElement!.style.setProperty(\"height\", \"140px\")\r\n        }\r\n        if (this.innerBoxElement != null) {\r\n          this.innerBoxElement!.style.setProperty(\"width\", \"80px\")\r\n          this.innerBoxElement!.style.setProperty(\"height\", \"80px\")\r\n        }\r\n      },\r\n      //自动化测试专用\r\n      setOutBoxMarginLeft(value : string) {\r\n        if (this.outBoxElement != null) {\r\n          this.outBoxElementOnResize = false\r\n          this.outBoxElement!.style.setProperty(\"margin-left\", value)\r\n        }\r\n      },\r\n      toggleDisplay() {\r\n        this.boxDisplay = !this.boxDisplay\r\n      },\r\n      analysisResizeObserverEntry(entry : UniResizeObserverEntry) : string {\r\n        const contentBoxSize = entry.contentBoxSize[0]\r\n        const borderBoxSize = entry.borderBoxSize[0]\r\n        const devicePixelContentBoxSize = entry.devicePixelContentBoxSize[0]\r\n        return \"borderBoxSize: \\n{blockSize:\" + borderBoxSize.blockSize + \", inlineSize:\" + borderBoxSize.inlineSize + \"}\\n\" +\r\n          \"contentBoxSize: \\n{blockSize:\" + contentBoxSize.blockSize + \", inlineSize:\" + contentBoxSize.inlineSize + \"}\\n\" +\r\n          \"devicePixelContentBoxSize: \\n{blockSize:\" + devicePixelContentBoxSize.blockSize + \", inlineSize:\" + devicePixelContentBoxSize.inlineSize + \"}\\n\" +\r\n          \"contentRect: \\n{x:\" + entry.contentRect.x + \", y:\" + entry.contentRect.y + \", width:\" + entry.contentRect.width + \", height:\" + entry.contentRect.height + \"}\"\r\n      },\n      cancelListen(){\n        // this.resizeObserver?.unobserve()\n        this.resizeObserver!.unobserve(this.outBoxElement!)\n        this.resizeObserver!.unobserve(this.innerBoxElement!)\n      },\n      goOnListen(){\n        this.resizeObserver!.observe(this.outBoxElement!)\n        this.resizeObserver!.observe(this.innerBoxElement!)\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .info-item {\r\n    flex-direction: row;\r\n  }\r\n\r\n  .info-text {\r\n    font-size: 14px;\r\n  }\r\n</style>\n",null,null],"names":[],"mappings":"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"}