{"version":3,"sources":["pages/API/element-takesnapshot/element-takesnapshot.uvue","pages/component/list-view/list-view-multiplex.uvue?type=page","pages/API/element-takesnapshot/element-takesnapshot.uvue?type=page","pages/API/navigator/new-page/onLoad.uvue?type=page","uni_modules/uni-upgrade-center-app/components/uni-upgrade-center-app/uni-upgrade-center-app.uvue","App.uvue"],"sourcesContent":["<template>\n  <view id=\"snapshot-content\">\n    <page-head title=\"对本页面根view截图\"></page-head>\n    <view class=\"uni-padding-wrap\">\n      <text>this is text</text>\n    </view>\n    <button class=\"uni-btn btn-TakeSnapshot\" type=\"primary\" @tap=\"takeSnapshotClick\">\n      点击截图并替换显示下方图片\n    </button>\n    <image style=\"margin-left:auto;margin-right:auto;margin-top:20px;width:90%;\" :src=\"snapImage\" :mode=\"mode\" @longpress=\"saveToAlbum\"></image>\n  </view>\n</template>\n\n<script lang=\"uts\">\n  export default {\n    data() {\n      return {\n        mode: \"center\",//aspectFit\n        snapImage: \"/static/uni.png\"\n      }\n    },\n    methods: {\n      takeSnapshotClick() {\n        const view = uni.getElementById('snapshot-content')!\n        view.takeSnapshot({\n          success: (res) => {\n            console.log(res.tempFilePath)\n            this.snapImage = res.tempFilePath\n            this.mode = 'widthFix'\n            uni.showToast({\n              title: '截图成功，路径：' + res.tempFilePath,\n              icon: \"none\"\n            })\n          },\n          fail: (res) => {\n            console.log(res)\n            uni.showToast({\n              icon: 'error',\n              title: '截图失败'\n            })\n          }\n        })\n      },\n      saveToAlbum(e : TouchEvent) {\n        // console.log(e.currentTarget!.getAttribute(\"src\"));\n        let filePath : string = e.currentTarget!.getAttribute(\"src\") as string\n        uni.showActionSheet({\n          itemList: [\"保存\"],\n          success: res => {\n            // console.log(res.tapIndex);\n            if (res.tapIndex == 0) {\n              uni.saveImageToPhotosAlbum({\n                filePath: filePath,\n                success() {\n                  uni.showToast({\n                    position: \"center\",\n                    icon: \"none\",\n                    title: \"图片保存成功，请到手机相册查看\"\n                  })\n                },\n                fail(e) {\n                  uni.showModal({\n                    content: \"保存相册失败，errCode：\" + e.errCode + \"，errMsg：\" + e.errMsg + \"，errSubject：\" + e.errSubject,\n                    showCancel: false\n                  });\n                }\n              })\n            }\n          },\n          fail: () => { },\n          complete: () => { }\n        });\n      }\n    }\n  }\n</script>\n",null,null,null,null,null],"names":[],"mappings":";;;;;;;;;;;;;;;;;+BAwB0B;+BA2BR;;;+BAkBN;AAvDL;;;;;;;eAbL,mBASO,QAAA,SATD,QAAG,qBAAkB;YACzB,YAA2C,sBAAA,SAAhC,WAAM;YACjB,mBAEO,QAAA,SAFD,WAAM,qBAAkB;gBAC5B,mBAAyB,QAAA,IAAA,EAAnB;;YAER,mBAES,UAAA,SAFD,WAAM,4BAA2B,UAAK,WAAW,aAAK,KAAA,iBAAiB,GAAE,mBAEjF,CAAA,EAAA;gBAAA;aAAA;YACA,mBAA4I,SAAA,SAArI,WAAqE,eAArE,SAAA,iBAAA,QAAA,kBAAA,QAAA,gBAAA,QAAA,WAAA,SAAuE,SAAK,KAAA,SAAS,EAAG,UAAM,KAAA,IAAI,EAAG,iBAAW,KAAA,WAAW;;;;;;;aAQ9H;aACA;;;wBADA,UAAM,UACN,eAAW;;;aAIb,oBAAA,MAAoB;YAClB,IAAM,OAAO,mBAAmB;YAChC,KAAK,YAAY,qBACf,UAAS,IAAC,IAAQ;gBAChB,QAAQ,GAAG,CAAC,IAAI,YAAY,EAAA;gBAC5B,IAAI,CAAC,SAAQ,GAAI,IAAI,YAAW;gBAChC,IAAI,CAAC,IAAG,GAAI;gBACZ,+BACE,QAAO,aAAa,IAAI,YAAY,EACpC,OAAM;YAEV;cACA,OAAM,IAAC,IAAQ;gBACb,QAAQ,GAAG,CAAC,KAAG;gBACf,+BACE,OAAM,SACN,QAAO;YAEX;;QAEJ;;aACA,cAAA,IAAY,GAAI,UAAU,EAAE;YAE1B,IAAI,UAAW,MAAK,GAAI,EAAE,aAAa,GAAE,YAAY,CAAC,OAAO,EAAC,CAAE,MAAK;YACrE,2CACE,WAAU;gBAAC;aAAK,EAChB,UAAS,IAAA,IAAO;gBAEd,IAAI,IAAI,QAAO,IAAK,CAAC,EAAE;oBACrB,yDACE,WAAU,UACV,UAAA,OAAU;wBACR,+BACE,WAAU,UACV,OAAM,QACN,QAAO;oBAEX;sBACA,OAAA,IAAK,CAAC,EAAE;wBACN,+BACE,UAAS,oBAAoB,EAAE,OAAM,GAAI,aAAa,EAAE,MAAK,GAAI,iBAAiB,EAAE,UAAU,EAC9F,aAAY,KAAI;oBAEpB;;gBAEJ;YACF;cACA,OAAM,MAAM,CAAE,GACd,WAAU,MAAM,CAAE;QAEtB;;;sBAlDA;sBAqBA,cAAY,GAAI;;;;;;;;;;;;;;;AA+BpB"}