{"version":3,"sources":["pages/component/video/video-format.uvue","pages/component/video/video-format.uvue?type=page"],"sourcesContent":["<template>\n\n  <scroll-view class=\"page-scroll-view\">\n\n    <page-head :title=\"title\"></page-head>\n    <view class=\"uni-padding-wrap uni-common-mt\">\n      <view class=\"uni-title\">\n        <text class=\"uni-title-text\">支持的视频格式示例</text>\n      </view>\n      <view v-for=\"(item,index) in supportFormats\" :key=\"index\">\n        <text class=\"uni-subtitle-text\">{{item.format}}</text>\n        <video :id=\"'video-' + item.format\" class=\"video\" :src=\"item.src\" :controls=\"true\" :direction=\"-90\"\n          @error=\"onError(item.format, $event as UniVideoErrorEvent)\"></video>\n      </view>\n      <view class=\"uni-title\">\n        <text class=\"uni-title-text\">暂不支持的格式</text>\n      </view>\n      <view v-for=\"(item,index) in notSupportFormats\" :key=\"index\">\n        <text class=\"uni-subtitle-text\">{{item.format}}</text>\n        <video :id=\"'video-' + item.format\" class=\"video\" :src=\"item.src\" :controls=\"true\" :direction=\"-90\"></video>\n      </view>\n    </view>\n\n  </scroll-view>\n\n</template>\n\n<script>\n  type VideoFormat = {\n    format : string\n    src : string\n  }\n\n  export default {\n    data() {\n      return {\n        title: 'video-format',\n        supportFormats: [\n          // TODO web本地运行时本地服务返回的content-type不对，导致本地视频无法播放。此外web端原生video不支持flv、m3u8、avi格式，但是和app端相比多了ogg格式的支持\n          {\n            format: 'mp4',\n            src: 'https://qiniu-web-assets.dcloud.net.cn/video/sample/2minute-demo.mp4'\n          },\n          {\n            format: 'm4v',\n            src: 'https://qiniu-web-assets.dcloud.net.cn/video/sample/2minute-demo.m4v'\n          },\n          {\n            format: 'mov',\n            src: 'https://qiniu-web-assets.dcloud.net.cn/video/sample/2minute-demo.mov'\n          },\n          {\n            format: 'webm（iOS和Safari不支持）',\n            src: 'https://qiniu-web-assets.dcloud.net.cn/video/sample/2minute-demo.webm'\n          },\n          {\n            format: '3gp',\n            src: 'https://qiniu-web-assets.dcloud.net.cn/video/sample/2minute-demo.3gp'\n          },\n\n          {\n            format: 'flv',\n            src: 'https://qiniu-web-assets.dcloud.net.cn/video/sample/2minute-demo.flv'\n          },\n          {\n            format: 'm3u8',\n            src: 'https://qiniu-web-assets.dcloud.net.cn/video/sample/2minute-demo.m3u8'\n          },\n          {\n            format: '本地m3u8',\n            src: '/static/test-video/2minute-demo.m3u8'\n          },\n\n          {\n            format: '错误路径',\n            src: 'https://www.dcloud.net.cn/errorpath.mp4'\n          },\n        ] as Array<VideoFormat>,\n        notSupportFormats: [\n\n          {\n            format: 'ogg',\n            src: 'https://qiniu-web-assets.dcloud.net.cn/video/sample/2minute-demo.ogg'\n          },\n\n          {\n            format: 'avi',\n            src: 'https://qiniu-web-assets.dcloud.net.cn/video/sample/2minute-demo.avi'\n          }\n        ] as Array<VideoFormat>,\n        // 自动化测试\n        isError: false\n      }\n    },\n    methods: {\n      onError: function (format : string, e : UniVideoErrorEvent) {\n        console.log(format + \":\" + JSON.stringify(e));\n        if (format != \"错误路径\") {\n          this.isError = true;\n        }\n      }\n    }\n  }\n</script>\n\n<style>\n  .video {\n    height: 200px;\n  }\n</style>\n",null],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiCO;;;;;;;eA/BL,mBAqBc,eAAA,SArBD,WAAM,qBAAkB;YAEnC,YAAsC,sBAAA,SAA1B,WAAO,KAAA,KAAK,GAAA,IAAA,EAAA,CAAA,EAAA;gBAAA;aAAA;YACxB,mBAgBO,QAAA,SAhBD,WAAM,mCAAgC;gBAC1C,mBAEO,QAAA,SAFD,WAAM,cAAW;oBACrB,mBAA6C,QAAA,SAAvC,WAAM,mBAAiB;;gBAE/B,mBAIO,UAAA,IAAA,EAAA,cAAA,UAAA,CAJsB,KAAA,cAAc,EAAA,IAA7B,MAAK,OAAL,SAAI,UAAA,GAAA,CAAA;2BAAlB,mBAIO,QAAA,SAJuC,SAAK,QAAK;wBACtD,mBAAsD,QAAA,SAAhD,WAAM,sBAAmB,gBAAG,KAAK,MAAM,GAAA,CAAA;wBAC7C,mBACsE,SAAA,SAD9D,SAAE,WAAa,KAAK,MAAM,GAAE,WAAM,SAAS,SAAK,KAAK,GAAG,EAAG,cAAU,IAAI,EAAG,eAAW,CAAA,EAAG,EAC/F,aAAK,IAAA,UAAA,GAAA,CAAA;4BAAE,KAAA,OAAO,CAAC,KAAK,MAAM,EAAE,SAAM,EAAA,CAAA;wBAAA;;;;;;;;;gBAEvC,mBAEO,QAAA,SAFD,WAAM,cAAW;oBACrB,mBAA2C,QAAA,SAArC,WAAM,mBAAiB;;gBAE/B,mBAGO,UAAA,IAAA,EAAA,cAAA,UAAA,CAHsB,KAAA,iBAAiB,EAAA,IAAhC,MAAK,OAAL,SAAI,UAAA,GAAA,CAAA;2BAAlB,mBAGO,QAAA,SAH0C,SAAK,QAAK;wBACzD,mBAAsD,QAAA,SAAhD,WAAM,sBAAmB,gBAAG,KAAK,MAAM,GAAA,CAAA;wBAC7C,mBAA4G,SAAA,SAApG,SAAE,WAAa,KAAK,MAAM,GAAE,WAAM,SAAS,SAAK,KAAK,GAAG,EAAG,cAAU,IAAI,EAAG,eAAW,CAAA,EAAG;;;;;;;;;;aAiBlG;aACA,gBAwCK,SAAM;aACX,mBAWK,SAAM;aAEX;;;wBAvDA,WAAO,gBACP,oBAAgB,WAwCL,aAAA,YArCP,SAAQ,OACR,MAAK,yEAoCE,YAjCP,SAAQ,OACR,MAAK,yEAgCE,YA7BP,SAAQ,OACR,MAAK,yEA4BE,YAzBP,SAAQ,uBACR,MAAK,0EAwBE,YArBP,SAAQ,OACR,MAAK,yEAoBE,YAhBP,SAAQ,OACR,MAAK,yEAeE,YAZP,SAAQ,QACR,MAAK,0EAWE,YARP,SAAQ,UACR,MAAK,yCAOE,YAHP,SAAQ,QACR,MAAK,6CAGT,uBAAmB,WAWR,aAAA,YARP,SAAQ,OACR,MAAK,yEAOE,YAHP,SAAQ,OACR,MAAK,0EAIT,aAAS,KAAI;;;aAIf,UAAS,IAAU,QAAS,MAAM,EAAE,GAAI,kBAAkB,EAAE;YAC1D,QAAQ,GAAG,CAAC,SAAS,MAAM,KAAK,SAAS,CAAC,IAAG;YAC7C,IAAI,UAAU,QAAQ;gBACpB,IAAI,CAAC,OAAM,GAAI,IAAI;YACrB;QACF;;;sBALA,UAAmB,QAAS,MAAM,EAAE,GAAI;;;;;;;;;;;;;;;;;;;;;AAO5C"}