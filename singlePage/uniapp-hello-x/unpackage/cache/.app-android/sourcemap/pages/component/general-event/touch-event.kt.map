{"version":3,"sources":["pages/component/general-event/touch-event.uvue","pages/component/list-view/list-view-multiplex.uvue?type=page","pages/component/general-event/touch-event.uvue?type=page"],"sourcesContent":["<template>\n  <scroll-view style=\"flex: 1\">\n    <page-head title=\"拖拽图标测试相关事件\"></page-head>\n    <view class=\"container\">\n      <view class=\"view-box\">\n        <image class=\"icon\" id=\"icon\" src=\"../image/logo.png\" @touchstart=\"onTouchStart\" @touchcancel=\"onTouchCancel\" @touchmove=\"onTouchMove\" @touchend=\"onTouchEnd\"></image>\n      </view>\n\n    </view>\n    <view v-if=\"touchEvent !== null\">\n      <text class=\"title1\">touches: </text>\n      <template v-for=\"(touch, index) in touchEvent!.touches\" :key=\"index\">\n        <text class=\"title2\">touch[{{ index }}]:</text>\n        <text>identifier: {{touch.identifier}}</text>\n        <text>pageX: {{ touch.pageX }}, pageY: {{ touch.pageY }}</text>\n        <text>clientX: {{ touch.clientX }}, clientY: {{ touch.clientY }}</text>\n        <text>screenX: {{ touch.screenX }}, screenY: {{ touch.screenY }}</text>\n      </template>\n    </view>\n  </scroll-view>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n        move: false,\n        posX: 0,\n        posY: 0,\n        lastX: 0,\n        lastY: 0,\n        touchEvent: null as TouchEvent | null,\n        icon: null as UniElement | null\n\t\t\t}\n\t\t},\n    onReady() {\n      this.icon = uni.getElementById(\"icon\")\n    },\n\t\tmethods: {\n      onTouchStart(e: TouchEvent) {\n        this.touchEvent = e\n        if(!this.move) {\n          this.move = true\n          this.posX = e.touches[0].screenX\n          this.posY = e.touches[0].screenY\n        }\n      },\n\t\t\tonTouchMove(e: TouchEvent) {\n        e.preventDefault()\n        this.touchEvent = e\n        let p = e.touches[0]\n        if(p.screenX == this.lastX && p.screenY == this.lastY){\n        \treturn\n        }\n        let x = p.screenX-this.posX\n        let y = p.screenY-this.posY\n        this.lastX = p.screenX\n        this.lastY = p.screenY\n        this.icon?.style?.setProperty('transform', 'translate('+x+'px,'+y+'px)')\n      },\n      onTouchEnd(e: TouchEvent) {\n        if(e.touches.length == 0) {\n          this.resetIcon()\n          this.touchEvent = null\n        }\n      },\n      onTouchCancel(_: TouchEvent) {\n        this.resetIcon()\n        this.touchEvent = null\n      },\n      resetIcon() {\n        this.move = false;\n        this.posX = 0;\n        this.posY = 0;\n        this.icon?.style?.setProperty('transform', 'translate(0px,0px)')\n      }\n\t\t}\n\t}\n</script>\n\n<style>\n\n  .container {\n    width: 100%;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  .view-box {\n    width: 300px;\n    height: 300px;\n    align-items: center;\n    justify-content: center;\n    border-style: solid;\n  }\n\n  .icon {\n    width: 100px;\n    height: 100px;\n  }\n\n  .msg-text {\n    margin-bottom: 100px;\n  }\n\n  .title1 {\n    margin-top: 10px;\n    font-size: 18px;\n  }\n\n  .title2 {\n    margin-top: 5px;\n    font-size: 16px;\n  }\n\n</style>\n",null,null],"names":[],"mappings":";;;;;;;;;;;;;;;;;+BAiCG;AAVG;;gBAYF,MAAU;YACR,IAAI,CAAC,IAAG,GAAI,mBAAmB;QACjC;;;;;;;;eApCF,mBAkBc,eAAA,SAlBD,WAAe,eAAf,SAAA,UAAA;YACX,YAA0C,sBAAA,SAA/B,WAAM;YACjB,mBAKO,QAAA,SALD,WAAM,cAAW;gBACrB,mBAEO,QAAA,SAFD,WAAM,aAAU;oBACpB,mBAAsK,SAAA,SAA/J,WAAM,QAAO,QAAG,QAAO,mBAAyB,kBAAY,KAAA,YAAY,EAAG,mBAAa,KAAA,aAAa,EAAG,iBAAW,KAAA,WAAW,EAAG,gBAAU,KAAA,UAAU;;;;;;;;YAIpJ,IAAA,KAAA,UAAU,KAAA,IAAA;gBAAtB,mBASO,QAAA,SAAA,SAAA,CAAA,GAAA;oBARL,mBAAqC,QAAA,SAA/B,WAAM,WAAS;oBACrB,mBAMW,UAAA,IAAA,EAAA,cAAA,UAAA,CANwB,KAAA,UAAU,GAAE,OAAO,EAAA,IAApC,OAAO,OAAP,SAAK,UAAA,GAAA,CAAA;8EAAuC,QAAK;4BACjE,mBAA+C,QAAA,SAAzC,WAAM,WAAS,WAAM,gBAAG,SAAQ,MAAE,CAAA;4BACxC,mBAA6C,QAAA,IAAA,EAAvC,iBAAY,gBAAE,MAAM,UAAU,GAAA,CAAA;4BACpC,mBAA+D,QAAA,IAAA,EAAzD,YAAO,gBAAG,MAAM,KAAK,IAAG,cAAS,gBAAG,MAAM,KAAK,GAAA,CAAA;4BACrD,mBAAuE,QAAA,IAAA,EAAjE,cAAS,gBAAG,MAAM,OAAO,IAAG,gBAAW,gBAAG,MAAM,OAAO,GAAA,CAAA;4BAC7D,mBAAuE,QAAA,IAAA,EAAjE,cAAS,gBAAG,MAAM,OAAO,IAAG,gBAAW,gBAAG,MAAM,OAAO,GAAA,CAAA;;;;;;;;;aAU7D;aACA;aACA;aACA;aACA;aACA,YAAoB;aACpB,MAAc;;;wBANd,UAAM,KAAK,EACX,UAAM,CAAC,EACP,UAAM,CAAC,EACP,WAAO,CAAC,EACR,WAAO,CAAC,EACR,gBAAY,IAAG,CAAE,EAAC,CAAE,aACpB,UAAM,IAAG,CAAE,EAAC,CAAE;;;aAOhB,eAAA,IAAa,GAAG,UAAU,EAAE;YAC1B,IAAI,CAAC,UAAS,GAAI;YAClB,IAAG,CAAC,IAAI,CAAC,IAAI,EAAE;gBACb,IAAI,CAAC,IAAG,GAAI,IAAG;gBACf,IAAI,CAAC,IAAG,GAAI,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,OAAM;gBAC/B,IAAI,CAAC,IAAG,GAAI,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,OAAM;YACjC;QACF;;aACH,cAAA,IAAY,GAAG,UAAU,EAAE;YACtB,EAAE,cAAc;YAChB,IAAI,CAAC,UAAS,GAAI;YAClB,IAAI,IAAI,EAAE,OAAO,CAAC,CAAC,CAAA;YACnB,IAAG,EAAE,OAAM,IAAK,IAAI,CAAC,KAAI,IAAK,EAAE,OAAM,IAAK,IAAI,CAAC,KAAK,EAAC;gBACrD;YACD;YACA,IAAI,IAAI,EAAE,OAAO,GAAC,IAAI,CAAC,IAAG;YAC1B,IAAI,IAAI,EAAE,OAAO,GAAC,IAAI,CAAC,IAAG;YAC1B,IAAI,CAAC,KAAI,GAAI,EAAE,OAAM;YACrB,IAAI,CAAC,KAAI,GAAI,EAAE,OAAM;YACrB,IAAI,CAAC,IAAI,EAAE,OAAO,YAAY,aAAa,eAAa,IAAE,QAAM,IAAE;QACpE;;aACA,aAAA,IAAW,GAAG,UAAU,EAAE;YACxB,IAAG,EAAE,OAAO,CAAC,MAAK,IAAK,CAAC,EAAE;gBACxB,IAAI,CAAC,SAAS;gBACd,IAAI,CAAC,UAAS,GAAI,IAAG;YACvB;QACF;;aACA,gBAAA,IAAc,GAAG,UAAU,EAAE;YAC3B,IAAI,CAAC,SAAS;YACd,IAAI,CAAC,UAAS,GAAI,IAAG;QACvB;;aACA,YAAA,MAAY;YACV,IAAI,CAAC,IAAG,GAAI,KAAK;YACjB,IAAI,CAAC,IAAG,GAAI,CAAC;YACb,IAAI,CAAC,IAAG,GAAI,CAAC;YACb,IAAI,CAAC,IAAI,EAAE,OAAO,YAAY,aAAa;QAC7C;;;sBApCA,eAAa,GAAG;sBAQnB,cAAY,GAAG;sBAaZ,aAAW,GAAG;sBAMd,gBAAc,GAAG;sBAIjB;;;;;;;;;;;;;;;;;;;;;AAOL"}