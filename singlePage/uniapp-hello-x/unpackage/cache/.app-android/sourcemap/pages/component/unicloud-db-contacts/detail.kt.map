{"version":3,"sources":["pages/component/unicloud-db-contacts/detail.uvue","pages/component/unicloud-db-contacts/list.uvue?type=page","pages/ask/index/index.uvue?type=page","pages/component/unicloud-db-contacts/detail.uvue?type=page","uni_modules/test-invoke-network-api/utssdk/interface.uts"],"sourcesContent":["<template>\n  <scroll-view class=\"page\">\n    <unicloud-db ref=\"udb\" v-slot:default=\"{data, loading, error}\" :collection=\"collection\" :where=\"where\"\n      page-data=\"replace\">\n      <view v-if=\"error!=null\" class=\"error\">{{error.errMsg}}</view>\n      <view v-if=\"loading\" class=\"loading\">正在加载...</view>\n      <view v-if=\"data.length>0\">\n        <view class=\"form-item\">\n          <text class=\"form-item-label\">姓名</text>\n          <text class=\"form-item-input\">{{data[0]['username']}}</text>\n        </view>\n        <view class=\"form-item\">\n          <text class=\"form-item-label\">电话</text>\n          <text class=\"form-item-input\">{{data[0]['mobile']}}</text>\n        </view>\n        <view class=\"form-item\">\n          <text class=\"form-item-label\">邮箱</text>\n          <text class=\"form-item-input\">{{data[0]['email']}}</text>\n        </view>\n        <view class=\"form-item\">\n          <text class=\"form-item-label\">备注</text>\n          <text class=\"form-item-input\">{{data[0]['comment']}}</text>\n        </view>\n        <view class=\"form-item\">\n          <text class=\"form-item-label\">性别</text>\n          <text class=\"form-item-input\">{{displayGender(data[0].getNumber('gender'))}}</text>\n        </view>\n        <button type=\"default\" @click=\"gotoUpdatePage(data[0].getString('_id'))\">编辑</button>\n      </view>\n    </unicloud-db>\n  </scroll-view>\n</template>\n\n<script>\n  import { COLLECTION_NAME, GenderType, GenderList, UNICLOUD_DB_CONTACTS_UPDATE } from './types.uts'\n\n  export default {\n    data() {\n      return {\n        collection: '',\n        where: '',\n        whereID: '',\n        uniCloudElement: null as UniCloudDBElement | null\n      }\n    },\n    onLoad(options) {\n      this.collection = COLLECTION_NAME;\n      this.whereID = options['id'] as string;\n      this.where = `_id=='${this.whereID}'`;\n    },\n    onShow() {\n      // TODO 后续通过 EventChannel 实现\n      uni.$off(UNICLOUD_DB_CONTACTS_UPDATE, this.onDataChange);\n    },\n    onUnload() {\n      // TODO 后续通过 EventChannel 实现\n      uni.$off(UNICLOUD_DB_CONTACTS_UPDATE, this.onDataChange);\n    },\n    onReady() {\n      this.uniCloudElement = this.$refs['udb'] as UniCloudDBElement\n    },\n    methods: {\n      displayGender(value : number | null) : string {\n        const str = value ?? -1\n        return (GenderList as GenderType[]).find((item : GenderType) : boolean => {\n          return item.value == str\n        })!.text;\n      },\n      gotoUpdatePage(id : string | null) {\n        // TODO 后续通过 EventChannel 实现\n        uni.$on(UNICLOUD_DB_CONTACTS_UPDATE, this.onDataChange);\n        uni.navigateTo({\n          url: './edit?id=' + id\n        })\n      },\n      onDataChange(_ : string) {\n        this.uniCloudElement!.loadData()\n      }\n    }\n  }\n</script>\n\n<style>\n  .page {\n    flex: 1;\n    padding: 15px;\n  }\n\n  .loading {\n    align-items: center;\n  }\n\n  .form-item {\n    flex-direction: row;\n    margin-bottom: 15px;\n    align-items: center;\n    padding: 8px 0;\n  }\n\n  .form-item-label {\n    width: 45px;\n    margin-right: 10px;\n  }\n\n  .form-item-input {\n    flex: 1;\n    font-size: 14px;\n    color: #666;\n  }\n</style>\n",null,null,null,null],"names":[],"mappings":"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"}