{"version":3,"sources":["pages/component/web-view-local/web-view-local.uvue","pages/component/web-view/web-view.uvue?type=page","uni_modules/uni-upgrade-center-app/components/uni-upgrade-center-app/uni-upgrade-center-app.uvue","pages/component/web-view-local/web-view-local.uvue?type=page"],"sourcesContent":["<template>\n  <web-view id=\"web-view\" ref=\"web-view\" class=\"web-view\" src=\"/hybrid/html/local.html\" @message=\"message\" @error=\"error\"\n    @loading=\"loading\" @load=\"load\" @download=\"download\">\n  </web-view>\n</template>\n\n<script>\n  export default {\n    data() {\n      return {\n        loadError: false,\n        loadFinish: false,\n        // 自动化测试\n        autoTest: false,\n        eventMessage: null as UTSJSONObject | null,\n        eventDownload: null as UTSJSONObject | null\n      }\n    },\n    methods: {\n      message(event : UniWebViewMessageEvent) {\n        console.log(JSON.stringify(event.detail));\n        let contentStr = JSON.stringify(event.detail);\n\n\n\n        uni.showModal({\n          content: contentStr,\n          showCancel: false\n        });\n        if (this.autoTest) {\n          this.eventMessage = {\n            \"tagName\": event.target?.tagName,\n            \"type\": event.type,\n            \"data\": event.detail.data\n          };\n        }\n      },\n      error(event : UniWebViewErrorEvent) {\n        this.loadError = true\n        console.log(JSON.stringify(event.detail));\n      },\n      loading(event : UniWebViewLoadingEvent) {\n        console.log(JSON.stringify(event.detail));\n      },\n      load(event : UniWebViewLoadEvent) {\n        this.loadFinish = true;\n        console.log(JSON.stringify(event.detail));\n      },\n      download(event : UniWebViewDownloadEvent) {\n        console.log(JSON.stringify(event.detail));\n        if (this.autoTest) {\n          const arr = event.detail.userAgent.split(' ');\n          this.eventDownload = {\n            \"tagName\": event.target?.tagName,\n            \"type\": event.type,\n            \"url\": event.detail.url,\n            \"userAgent\": arr[arr.length - 1],\n            \"contentDisposition\": event.detail.contentDisposition,\n            \"mimetype\": event.detail.mimetype,\n            \"isContentLengthValid\": (event.detail.contentLength / 1024 / 1024).toInt() > 1\n          };\n        }\n      },\n      // 自动化测试\n      testEventDownload() {\n        uni.createWebviewContext('web-view')?.evalJS(\"document.getElementsByTagName('a')[0].click()\");\n      },\n      testEventMessage() {\n        uni.createWebviewContext('web-view')?.evalJS(\"document.getElementById('postMessage').click()\");\n      }\n    }\n  }\n</script>\n\n<style>\n.web-view {\n  flex: 1;\n}\n</style>\n",null,null,null],"names":[],"mappings":";;;;;;;;;;;;;;;;;+BA8B8B;;AAvBvB;;;;;;eANL,mBAEW,YAAA,SAFD,QAAG,YAAW,SAAI,YAAW,WAAM,YAAW,SAAI,2BAA2B,eAAS,KAAA,OAAO,EAAG,aAAO,KAAA,KAAK,EACnH,eAAS,KAAA,OAAO,EAAG,YAAM,KAAA,IAAI,EAAG,gBAAU,KAAA,QAAQ;;;;;;;;aAQ/C;aACA;aAEA;aACA,cAAsB;aACtB,eAAuB;;;wBALvB,eAAW,KAAK,EAChB,gBAAY,KAAK,EAEjB,cAAU,KAAK,EACf,kBAAc,IAAG,CAAE,EAAC,CAAE,gBACtB,mBAAe,IAAG,CAAE,EAAC,CAAE;;;aAIzB,UAAA,IAAQ,OAAQ,sBAAsB,EAAE;YACtC,QAAQ,GAAG,CAAC,KAAK,SAAS,CAAC,MAAM,MAAM,GAAE;YACzC,IAAI,aAAa,KAAK,SAAS,CAAC,MAAM,MAAM;YAI5C,+BACE,UAAS,YACT,aAAY,KAAI;YAElB,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,IAAI,CAAC,YAAW,iBAAI;;wBAClB;wBAAW,MAAM,MAAM,EAAE;;;wBACzB;wBAAQ,MAAM,IAAI;;;wBAClB;wBAAQ,MAAM,MAAM,CAAC,IAAG;;;YAE5B;QACF;;aACA,QAAA,IAAM,OAAQ,oBAAoB,EAAE;YAClC,IAAI,CAAC,SAAQ,GAAI,IAAG;YACpB,QAAQ,GAAG,CAAC,KAAK,SAAS,CAAC,MAAM,MAAM,GAAE;QAC3C;;aACA,UAAA,IAAQ,OAAQ,sBAAsB,EAAE;YACtC,QAAQ,GAAG,CAAC,KAAK,SAAS,CAAC,MAAM,MAAM,GAAE;QAC3C;;aACA,OAAA,IAAK,OAAQ,mBAAmB,EAAE;YAChC,IAAI,CAAC,UAAS,GAAI,IAAI;YACtB,QAAQ,GAAG,CAAC,KAAK,SAAS,CAAC,MAAM,MAAM,GAAE;QAC3C;;aACA,WAAA,IAAS,OAAQ,uBAAuB,EAAE;YACxC,QAAQ,GAAG,CAAC,KAAK,SAAS,CAAC,MAAM,MAAM,GAAE;YACzC,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,IAAM,MAAM,MAAM,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC;gBACzC,IAAI,CAAC,aAAY,iBAAI;;wBACnB;wBAAW,MAAM,MAAM,EAAE;;;wBACzB;wBAAQ,MAAM,IAAI;;;wBAClB;wBAAO,MAAM,MAAM,CAAC,GAAG;;;wBACvB;wBAAa,GAAG,CAAC,IAAI,MAAK,GAAI,CAAC,CAAC;;;wBAChC;wBAAsB,MAAM,MAAM,CAAC,kBAAkB;;;wBACrD;wBAAY,MAAM,MAAM,CAAC,QAAQ;;;wBACjC;yBAAwB,CAAC,MAAM,MAAM,CAAC,aAAY,GAAI,IAAG,GAAI,IAAI,EAAE,KAAK,KAAK,CAAA;;;YAEjF;QACF;;aAEA,oBAAA,MAAoB;YAClB,yBAAyB,mBAAa,OAAO;QAC/C;;aACA,mBAAA,MAAmB;YACjB,yBAAyB,mBAAa,OAAO;QAC/C;;;sBAlDA,UAAQ,OAAQ;sBAkBhB,QAAM,OAAQ;sBAId,UAAQ,OAAQ;sBAGhB,OAAK,OAAQ;sBAIb,WAAS,OAAQ;sBAgBjB;sBAGA;;;;;;;;;;;;;;;;;;;;;AAIJ"}