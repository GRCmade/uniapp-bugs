{"version":3,"sources":["pages/component/unicloud-db-contacts/add.uvue","pages/component/unicloud-db-contacts/add.uvue?type=page","uni_modules/uni-upgrade-center-app/components/uni-upgrade-center-app/uni-upgrade-center-app.uvue","uni_modules/test-invoke-network-api/utssdk/interface.uts"],"sourcesContent":["<template>\n  <view class=\"page\">\n    <unicloud-db ref=\"udb\" :collection=\"collection\" loadtime=\"manual\"></unicloud-db>\n    <form @submit=\"onFormSubmit\">\n      <view class=\"form-item\">\n        <text class=\"form-item-label\">姓名</text>\n        <input class=\"form-item-input\" placeholder=\"姓名\" name=\"username\" />\n      </view>\n      <view class=\"form-item\">\n        <text class=\"form-item-label\">电话</text>\n        <input class=\"form-item-input\" placeholder=\"电话\" name=\"mobile\" />\n      </view>\n      <view class=\"form-item\">\n        <text class=\"form-item-label\">邮箱</text>\n        <input class=\"form-item-input\" placeholder=\"邮箱地址\" name=\"email\" />\n      </view>\n      <view class=\"form-item\">\n        <text class=\"form-item-label\">备注</text>\n        <textarea class=\"form-item-input\" placeholder=\"备注\" name=\"comment\" maxlength=\"-1\"/>\n      </view>\n      <view class=\"form-item\">\n        <text class=\"form-item-label\">性别</text>\n        <radio-group class=\"radio-list\" name=\"gender\">\n          <view class=\"radio-item\" v-for=\"(item, _) in genderList\" :key=\"item.value\">\n            <radio :value=\"item.value\" />\n            <text>{{item.text}}</text>\n          </view>\n        </radio-group>\n      </view>\n      <button class=\"btn-add\" type=\"primary\" form-type=\"submit\">保存</button>\n    </form>\n  </view>\n</template>\n\n<script>\n  import { COLLECTION_NAME, GenderType, GenderList, UNICLOUD_DB_CONTACTS_ADD } from './types.uts'\n\n  export default {\n    data() {\n      return {\n        collection: COLLECTION_NAME,\n        genderList: GenderList as GenderType[],\n        uniCloudElement: null as UniCloudDBElement | null\n      }\n    },\n    onReady() {\n      this.uniCloudElement = this.$refs['udb'] as UniCloudDBElement\n    },\n    methods: {\n      onFormSubmit: function (e : UniFormSubmitEvent) {\n        const formData = e.detail.value\n        const genderString = formData['gender'] as string\n        formData['gender'] = (genderString.length > 0) ? parseInt(genderString) : -1\n        console.log('formData', formData)\n        this.uniCloudElement!.add(formData, {\n          showToast: false,\n          needLoading: true,\n          loadingTitle: \"正在保存...\",\n          success: (_ : UniCloudDBAddResult) => {\n            // TODO 后续通过 EventChannel 实现\n            uni.$emit(UNICLOUD_DB_CONTACTS_ADD, '')\n            setTimeout(() => {\n              uni.navigateBack()\n            }, 500)\n          },\n          fail: (err : any | null) => {\n            const error = err as UniCloudError\n            uni.showModal({\n              content: error.errMsg,\n              showCancel: false\n            })\n          }\n        })\n      }\n    }\n  }\n</script>\n\n<style>\n  .page {\n    padding: 15px;\n  }\n\n  .form-item {\n    flex-direction: row;\n    margin-bottom: 15px;\n    align-items: center;\n  }\n\n  .form-item-label {\n    width: 45px;\n    margin-right: 10px;\n  }\n\n  .form-item-input {\n    flex: 1;\n    font-size: 14px;\n    color: #666;\n    border: 1px #e5e5e5 solid;\n    border-radius: 5px;\n    padding: 8px;\n  }\n\n  .radio-list {\n    flex-direction: row;\n  }\n\n  .radio-item {\n    flex-direction: row;\n    margin-right: 30px;\n    align-items: center;\n  }\n\n  .btn-add {\n    margin-top: 50px;\n  }\n</style>\n",null,null,null],"names":[],"mappings":";;;;;;;;;;;;;;;;;+BA4DgB;+BA3CR;;AAoBD;;gBAQH,MAAU;YACR,IAAI,CAAC,eAAc,GAAI,IAAI,CAAC,OAAK,CAAC,MAAK,CAAE,EAAC,CAAE;QAC9C;;;;;;;;;;;eA9CF,mBA8BO,QAAA,SA9BD,WAAM,SAAM;YAChB,YAAgF,wBAAA,SAAnE,SAAI,OAAO,gBAAY,KAAA,UAAU,EAAE,cAAS;;;YACzD,YA2BO,iBAAA,SA3BA,cAAQ,KAAA,YAAY,GAAA,kCACzB,gBAGO,GAAA;uBAAA;oBAHP,mBAGO,QAAA,SAHD,WAAM,cAAW;wBACrB,mBAAuC,QAAA,SAAjC,WAAM,oBAAkB;wBAC9B,mBAAkE,SAAA,SAA3D,WAAM,mBAAkB,iBAAY,MAAK,UAAK;;oBAEvD,mBAGO,QAAA,SAHD,WAAM,cAAW;wBACrB,mBAAuC,QAAA,SAAjC,WAAM,oBAAkB;wBAC9B,mBAAgE,SAAA,SAAzD,WAAM,mBAAkB,iBAAY,MAAK,UAAK;;oBAEvD,mBAGO,QAAA,SAHD,WAAM,cAAW;wBACrB,mBAAuC,QAAA,SAAjC,WAAM,oBAAkB;wBAC9B,mBAAiE,SAAA,SAA1D,WAAM,mBAAkB,iBAAY,QAAO,UAAK;;oBAEzD,mBAGO,QAAA,SAHD,WAAM,cAAW;wBACrB,mBAAuC,QAAA,SAAjC,WAAM,oBAAkB;wBAC9B,mBAAkF,YAAA,SAAxE,WAAM,mBAAkB,iBAAY,MAAK,UAAK,WAAU,eAAU;;oBAE9E,mBAQO,QAAA,SARD,WAAM,cAAW;wBACrB,mBAAuC,QAAA,SAAjC,WAAM,oBAAkB;wBAC9B,YAKc,wBAAA,SALD,WAAM,cAAa,UAAK,6CACV,gBAA+B,GAAA;mCAAA;gCAAxD,mBAGO,UAAA,IAAA,EAAA,cAAA,UAAA,CAHsC,KAAA,UAAU,EAAA,IAAtB,MAAM,GAAN,SAAI,UAAA,GAAA,CAAA;2CAArC,mBAGO,QAAA,SAHD,WAAM,cAA8C,SAAK,KAAK,KAAK;wCACvE,YAA6B,kBAAA,SAArB,WAAO,KAAK,KAAK;;;wCACzB,mBAA0B,QAAA,IAAA,EAAA,gBAAlB,KAAK,IAAI,GAAA,CAAA;;;;;;;;oBAIvB,mBAAqE,UAAA,SAA7D,WAAM,WAAU,UAAK,WAAU,eAAU,WAAS;;;;;;;;aAWxD;aACA;aACA,iBAAyB;;;wBAFzB,iCACA,oDACA,qBAAiB,IAAG,CAAE,EAAC,CAAE;;;aAO3B,eAAc,IAAU,GAAI,kBAAkB,EAAE;YAC9C,IAAM,WAAW,EAAE,MAAM,CAAC,KAAI;YAC9B,IAAM,eAAe,QAAQ,CAAC,SAAQ,CAAE,EAAC,CAAE,MAAK;YAChD,QAAQ,CAAC,SAAQ,GAAI,IAAA,CAAC,aAAa,MAAK,GAAI,CAAC;gBAAI,SAAS;;gBAAgB,CAAC,CAAA;;YAAA;YAC3E,QAAQ,GAAG,CAAC,YAAY,UAAQ;YAChC,IAAI,CAAC,eAAe,GAAE,GAAG,CAAC,UAAU;gBAClC,IAAA,YAAW,KAAK;gBAChB,IAAA,cAAa,IAAI;gBACjB,IAAA,eAAc;gBACd,IAAA,UAAS,IAAC,GAAI,oBAAwB;oBAEpC,oCAAoC;oBACpC,WAAW,KAAM;wBACf;oBACF;sBAAG,GAAG;gBACR;gBACA,IAAA,OAAM,IAAC,KAAM,GAAE,EAAa;oBAC1B,IAAM,QAAQ,IAAI,EAAC,CAAE;oBACrB,+BACE,UAAS,MAAM,MAAM,EACrB,aAAY,KAAI;gBAEpB;aACD;QACH;;;sBAxBA,eAAwB,GAAI;;;;;;;;;;;;;;;;;;;;;AA0BhC"}