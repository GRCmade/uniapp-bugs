{"code":"import { defineComponent } from \"vue\";\nvar sourceTypeArray = [\n    ['camera'],\n    ['album'],\n    ['camera', 'album']\n];\nvar sizeTypeArray = [\n    ['compressed'],\n    ['original'],\n    ['compressed', 'original']\n];\nexport default defineComponent({\n    data() {\n        return {\n            title: 'chooseImage',\n            imageList: [],\n            sourceTypeIndex: 2,\n            sourceType: ['拍照', '相册', '拍照或相册'],\n            sizeTypeIndex: 2,\n            sizeType: ['压缩', '原图', '压缩或原图'],\n            countIndex: 8,\n            count: [1, 2, 3, 4, 5, 6, 7, 8, 9],\n            isCrop: false,\n            cropPercent: 80,\n            cropWidth: 100,\n            cropHeight: 100,\n            cropResize: false\n        };\n    },\n    onUnload() {\n        this.imageList = [];\n        this.sourceTypeIndex = 2;\n        this.sourceType = ['拍照', '相册', '拍照或相册'];\n        this.sizeTypeIndex = 2;\n        this.sizeType = ['压缩', '原图', '压缩或原图'];\n        this.countIndex = 8;\n    },\n    methods: {\n        cropHeightConfim(e) {\n            let value = parseInt(e.detail.value);\n            if (value > 0) {\n                this.cropHeight = value;\n            }\n            else {\n                uni.showToast({\n                    position: \"bottom\",\n                    title: \"裁剪高度需要大于0\"\n                });\n            }\n        },\n        cropWidthConfim(e) {\n            let value = parseInt(e.detail.value);\n            if (value > 0) {\n                this.cropWidth = value;\n            }\n            else {\n                uni.showToast({\n                    position: \"bottom\",\n                    title: \"裁剪宽度需要大于0\"\n                });\n            }\n        },\n        cropPercentConfim(e) {\n            let value = parseInt(e.detail.value);\n            if (value > 0 && value <= 100) {\n                this.cropPercent = value;\n            }\n            else {\n                uni.showToast({\n                    position: \"bottom\",\n                    title: \"请输入0~100之间的值\"\n                });\n            }\n        },\n        cropResizeChange(e) {\n            this.cropResize = e.detail.value;\n        },\n        switchCrop(e) {\n            this.isCrop = e.detail.value;\n        },\n        removeImage(index) {\n            this.imageList.splice(index, 1);\n        },\n        chooseImageSource() {\n            uni.showActionSheet({\n                itemList: ['拍照', '相册', '拍照或相册'],\n                success: (e) => {\n                    this.sourceTypeIndex = e.tapIndex;\n                }\n            });\n        },\n        chooseImageType() {\n            uni.showActionSheet({\n                itemList: ['压缩', '原图', '压缩或原图'],\n                success: (e) => {\n                    this.sizeTypeIndex = e.tapIndex;\n                }\n            });\n        },\n        chooseImageCount(event) {\n            let count = parseInt(event.detail.value) - 1;\n            if (count < 0) {\n                uni.showToast({\n                    position: \"bottom\",\n                    title: \"图片数量应该大于0\"\n                });\n                return null;\n            }\n            this.countIndex = count;\n        },\n        chooseImage: function () {\n            // var cropOption:ChooseImageCropOptions|null = this.isCrop ? null : new ChooseImageCropOptions(  )\n            if (this.imageList.length >= 9) {\n                uni.showToast({\n                    position: \"bottom\",\n                    title: \"已经有9张图片了，请删除部分图片之后重新选择\"\n                });\n                return null;\n            }\n            uni.chooseImage({\n                sourceType: sourceTypeArray[this.sourceTypeIndex],\n                sizeType: sizeTypeArray[this.sizeTypeIndex],\n                crop: this.isCrop ? { \"quality\": this.cropPercent, \"width\": this.cropWidth, \"height\": this.cropHeight, \"resize\": this.cropResize } : null,\n                count: this.imageList.length + this.count[this.countIndex] > 9 ? 9 - this.imageList.length : this.count[this.countIndex],\n                success: (res) => {\n                    this.imageList = this.imageList.concat(res.tempFilePaths);\n                },\n                fail: (err) => {\n                    uni.__log__('log', 'at pages/API/choose-image/choose-image.uvue:227', \"err: \", UTS.JSON.stringify(err));\n                }\n            });\n        },\n        previewImage: function (index) {\n            uni.previewImage({\n                current: index,\n                urls: this.imageList\n            });\n        }\n    }\n});\n//# sourceMappingURL=/Users/gaoruicheng/Documents/DcloudProject/uniapp-bugs/uniapp-bugs-main/singlePage/uniapp-hello-x/pages/API/choose-image/choose-image.uvue?vue&type=script&lang.uts.js.map","references":[],"uniExtApis":["uni.showToast","uni.showActionSheet","uni.chooseImage","uni.__log__","uni.previewImage"],"map":"{\"version\":3,\"file\":\"choose-image.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"choose-image.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
