{"code":"export default function () {\n    return new Promise((resolve, reject) => {\n        const systemInfo = uni.getSystemInfoSync();\n        const appId = systemInfo.appId;\n        const appVersion = systemInfo.appVersion; //systemInfo.appVersion\n        if (typeof appId === 'string' && typeof appVersion === 'string' && appId.length > 0 && appVersion.length > 0) {\n            let data = {\n                action: 'checkVersion',\n                appid: appId,\n                appVersion: appVersion,\n                is_uniapp_x: true,\n                wgtVersion: '0.0.0.0.0.1'\n            };\n            try {\n                uniCloud.callFunction({\n                    name: 'uni-upgrade-center',\n                    data: data\n                }).then(res => {\n                    const code = res.result['code'];\n                    const codeIsNumber = ['Int', 'Long', 'number'].includes(typeof code);\n                    if (codeIsNumber) {\n                        if (code == 0) {\n                            reject({\n                                code: res.result['code'],\n                                message: res.result['message']\n                            });\n                        }\n                        else if (code < 0) {\n                            reject({\n                                code: res.result['code'],\n                                message: res.result['message']\n                            });\n                        }\n                        else {\n                            const result = JSON.parse(JSON.stringify(res.result));\n                            resolve(result);\n                        }\n                    }\n                }).catch((err) => {\n                    const error = err;\n                    if (error.errMsg == '未匹配到云函数[uni-upgrade-center]')\n                        error.errMsg = '【uni-upgrade-center-app】未配置uni-upgrade-center，无法升级。参考: https://uniapp.dcloud.net.cn/uniCloud/upgrade-center.html';\n                    reject(error.errMsg);\n                });\n            }\n            catch (e) {\n                reject(e.message);\n            }\n        }\n        else {\n            reject('invalid appid or appVersion');\n        }\n    });\n}\n//# sourceMappingURL=/Users/gaoruicheng/Documents/DcloudProject/uniapp-bugs/uniapp-bugs-main/singlePage/uniapp-hello-x/uni_modules/uni-upgrade-center-app/utils/call-check-version.js.map","references":[],"uniExtApis":[],"map":"{\"version\":3,\"file\":\"call-check-version.js\",\"sourceRoot\":\"\",\"sources\":[\"call-check-version.ts\"],\"names\":[],\"mappings\":\"AA+BA,MAAM,CAAC,OAAO;IAEb,OAAO,IAAI,OAAO,CAAyB,CAAC,OAAO,EAAE,MAAM;QAC1D,MAAM,UAAU,GAAG,GAAG,CAAC,iBAAiB,EAAE,CAAA;QAC1C,MAAM,KAAK,GAAG,UAAU,CAAC,KAAK,CAAA;QAC9B,MAAM,UAAU,GAAG,UAAU,CAAC,UAAU,CAAA,CAAC,uBAAuB;QA8BhE,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,OAAO,UAAU,KAAK,QAAQ,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;YAC7G,IAAI,IAAI,GAAG;gBACV,MAAM,EAAE,cAAc;gBACtB,KAAK,EAAE,KAAK;gBACZ,UAAU,EAAE,UAAU;gBACtB,WAAW,EAAE,IAAI;gBACjB,UAAU,EAAE,aAAa;aACzB,CAAA;YACD,IAAI;gBACH,QAAQ,CAAC,YAAY,CAAC;oBACrB,IAAI,EAAE,oBAAoB;oBAC1B,IAAI,EAAE,IAAI;iBACV,CAAC,CAAC,IAAI,CAAC,GAAG;oBACV,MAAM,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;oBAC/B,MAAM,YAAY,GAAG,CAAC,KAAK,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC,QAAQ,CAAC,OAAO,IAAI,CAAC,CAAA;oBACpE,IAAI,YAAY,EAAE;wBAChB,IAAK,IAAe,IAAI,CAAC,EAAE;4BACzB,MAAM,CAAC;gCACL,IAAI,EAAE,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC;gCACxB,OAAO,EAAE,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC;6BAC/B,CAAC,CAAA;yBACH;6BAAM,IAAK,IAAe,GAAG,CAAC,EAAE;4BAC/B,MAAM,CAAC;gCACL,IAAI,EAAE,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC;gCACxB,OAAO,EAAE,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC;6BAC/B,CAAC,CAAA;yBACH;6BAAM;4BACA,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAyB,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAA2B,CAAA;4BACvG,OAAO,CAAC,MAAM,CAAC,CAAA;yBAChB;qBACP;gBACF,CAAC,CAAC,CAAC,KAAK,CAAO,CAAC,GAAgB;oBAC/B,MAAM,KAAK,GAAG,GAAoB,CAAA;oBAClC,IAAI,KAAK,CAAC,MAAM,IAAI,6BAA6B;wBAChD,KAAK,CAAC,MAAM,GAAG,kHAAkH,CAAA;oBAClI,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAA;gBACrB,CAAC,CAAC,CAAA;aACF;YAAC,OAAO,CAAC,EAAE;gBACX,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAA;aACjB;SACD;aAAM;YACN,MAAM,CAAC,6BAA6B,CAAC,CAAA;SACrC;IAEF,CAAC,CAAC,CAAA;AASH,CAAC\"}"}
