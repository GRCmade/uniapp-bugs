{"code":"import { __awaiter } from \"tslib\";\nimport { defineComponent } from \"vue\";\nexport default defineComponent({\n    data() {\n        return {\n            title: '请求云函数',\n            callFunctionResult: {},\n            callFunctionError: {},\n            genericDemoShowMessage: '',\n            isUniTest: false\n        };\n    },\n    onLoad() {\n    },\n    onUnload() {\n        if (this.isUniTest) {\n            uni.hideToast();\n        }\n    },\n    methods: {\n        notify(content, title) {\n            if (!this.isUniTest) {\n                uni.showModal({\n                    title,\n                    content,\n                    showCancel: false\n                });\n            }\n            else {\n                uni.__log__('log', 'at pages/API/unicloud-call-function/unicloud-call-function.uvue:46', title, content);\n            }\n        },\n        callFunctionWithGeneric() {\n            return __awaiter(this, void 0, void 0, function* () {\n                class EchoCfResult extends UTS.UTSType {\n                    static get$UTSMetadata$() {\n                        return {\n                            kind: 2,\n                            get fields() {\n                                return {\n                                    showMessage: { type: String, optional: false }\n                                };\n                            }\n                        };\n                    }\n                    constructor(options, metadata = EchoCfResult.get$UTSMetadata$(), isJSONParse = false) {\n                        super();\n                        this.__props__ = UTS.UTSType.initProps(options, metadata, isJSONParse);\n                        this.showMessage = this.__props__.showMessage;\n                        delete this.__props__;\n                    }\n                }\n                uni.showLoading({\n                    title: '加载中...'\n                });\n                yield uniCloud.callFunction({\n                    name: 'echo-cf',\n                    data: new UTSJSONObject({\n                        num: 1,\n                        str: 'ABC'\n                    })\n                }).then(res => {\n                    const result = res.result;\n                    uni.hideLoading();\n                    this.genericDemoShowMessage = result.showMessage;\n                    this.notify(result.showMessage, '提示');\n                }).catch((err = null) => {\n                    const error = err;\n                    this.callFunctionError = {\n                        errCode: error.errCode,\n                        errMsg: error.errMsg\n                    };\n                    uni.hideLoading();\n                    this.notify(error.errMsg, '错误');\n                });\n            });\n        },\n        callFunction() {\n            return __awaiter(this, void 0, void 0, function* () {\n                uni.showLoading({\n                    title: '加载中...'\n                });\n                yield uniCloud.callFunction({\n                    name: 'echo-cf',\n                    data: new UTSJSONObject({\n                        num: 1,\n                        str: 'ABC'\n                    })\n                }).then(res => {\n                    const result = res.result;\n                    this.callFunctionResult = result;\n                    uni.__log__('log', 'at pages/API/unicloud-call-function/unicloud-call-function.uvue:90', UTS.JSON.stringify(result));\n                    uni.hideLoading();\n                    this.notify(result['showMessage'], '提示');\n                }).catch((err = null) => {\n                    const error = err;\n                    this.callFunctionError = {\n                        errCode: error.errCode,\n                        errMsg: error.errMsg\n                    };\n                    uni.hideLoading();\n                    this.notify(error.errMsg, '错误');\n                });\n            });\n        }\n    }\n});\n//# sourceMappingURL=/Users/gaoruicheng/Documents/DcloudProject/uniapp-bugs/uniapp-bugs-main/singlePage/uniapp-hello-x/pages/API/unicloud-call-function/unicloud-call-function.uvue?vue&type=script&lang.uts.js.map","references":[],"uniExtApis":["uni.hideToast","uni.showModal","uni.__log__","uni.showLoading","uniCloud.callFunction","uni.hideLoading"],"map":"{\"version\":3,\"file\":\"unicloud-call-function.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"unicloud-call-function.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
