{"code":"import { Lunar, LunarInfoType } from './calendar.uts';\nexport class DateType extends UTS.UTSType {\n    static get$UTSMetadata$() {\n        return {\n            kind: 2,\n            get fields() {\n                return {\n                    fullDate: { type: String, optional: false },\n                    year: { type: Number, optional: false },\n                    month: { type: Number, optional: false },\n                    date: { type: Number, optional: false },\n                    day: { type: Number, optional: false },\n                    disabled: { type: Boolean, optional: false },\n                    lunar: { type: String, optional: false },\n                    is_today: { type: Boolean, optional: false },\n                    data: { type: \"Unknown\", optional: true }\n                };\n            }\n        };\n    }\n    constructor(options, metadata = DateType.get$UTSMetadata$(), isJSONParse = false) {\n        super();\n        this.__props__ = UTS.UTSType.initProps(options, metadata, isJSONParse);\n        this.fullDate = this.__props__.fullDate;\n        this.year = this.__props__.year;\n        this.month = this.__props__.month;\n        this.date = this.__props__.date;\n        this.day = this.__props__.day;\n        this.disabled = this.__props__.disabled;\n        this.lunar = this.__props__.lunar;\n        this.is_today = this.__props__.is_today;\n        this.data = this.__props__.data;\n        delete this.__props__;\n    }\n}\nexport class Calendar {\n    constructor() {\n        this.lunar = new Lunar();\n    }\n    getDateInfo(time = '') {\n        const nowDate = this.getDate(time);\n        const lunar = this.getlunar(nowDate.year, nowDate.month, nowDate.date);\n        const item = nowDate;\n        item.data = lunar;\n        return item;\n    }\n    /**\n     * 获取每周数据\n     * @param {Object} dateData\n     */\n    getWeeks(dateData = '') {\n        const dateObj = this.getDate(dateData);\n        const year = dateObj.year;\n        const month = dateObj.month;\n        let firstDay = new Date(year, month - 1, 0).getDay();\n        // 获取本月天数\n        let currentDay = new Date(year, month, 0).getDate();\n        // 上个月末尾几天\n        const lastMonthDays = this._getLastMonthDays(firstDay, dateObj);\n        // 本月天数\n        const currentMonthDys = this._currentMonthDys(currentDay, dateObj);\n        // 本月剩余天数\n        const surplus = 42 - (lastMonthDays.length + currentMonthDys.length);\n        // 下个月开始几天\n        const nextMonthDays = this._getNextMonthDays(surplus, dateObj);\n        // const weeks = []\n        // 本月所有日期格子合并\n        let days = [];\n        for (let i = 0; i < lastMonthDays.length; i++) {\n            const item = lastMonthDays[i];\n            days.push(item);\n        }\n        for (let i = 0; i < currentMonthDys.length; i++) {\n            const item = currentMonthDys[i];\n            days.push(item);\n        }\n        for (let i = 0; i < nextMonthDays.length; i++) {\n            const item = nextMonthDays[i];\n            days.push(item);\n        }\n        let weeks = [];\n        // 拼接数组  上个月开始几天 + 本月天数+ 下个月开始几天\n        for (let i = 0; i < days.length; i += 7) {\n            const item = days.slice(i, i + 7);\n            weeks.push(item);\n        }\n        return weeks;\n    }\n    /**\n     * 获取上月剩余天数\n     */\n    _getLastMonthDays(firstDay, full) {\n        let dateArr = [];\n        for (let i = firstDay; i > 0; i--) {\n            const month = full.month - 1;\n            const beforeDate = new Date(full.year, month, -i + 1).getDate();\n            let nowDate = full.year + '-' + month + '-' + beforeDate;\n            let item = this.getDate(nowDate);\n            item.disabled = true;\n            dateArr.push(item);\n        }\n        return dateArr;\n    }\n    /**\n     * 获取本月天数\n     */\n    _currentMonthDys(dateData, full) {\n        let dateArr = [];\n        for (let i = 1; i <= dateData; i++) {\n            let nowDate = full.year + '-' + full.month + '-' + i;\n            let item = this.getDate(nowDate);\n            item.disabled = false;\n            dateArr.push(item);\n        }\n        return dateArr;\n    }\n    /**\n     * 获取下月天数\n     */\n    _getNextMonthDays(surplus, full) {\n        let dateArr = [];\n        for (let i = 1; i < surplus + 1; i++) {\n            const month = full.month + 1;\n            let nowDate = full.year + '-' + month + '-' + i;\n            let item = this.getDate(nowDate);\n            item.disabled = true;\n            dateArr.push(item);\n        }\n        return dateArr;\n    }\n    /**\n     * 计算阴历日期显示\n     */\n    getlunar(year, month, date) {\n        return this.lunar.solar2lunar(year, month, date);\n    }\n    /**\n     * 获取任意时间\n     */\n    getDate(date = '', AddDayCount = 0, str = 'day') {\n        let dd = new Date();\n        if (date !== '') {\n            const datePart = date.split(\" \");\n            const dateData = datePart[0].split(\"-\");\n            const year = parseInt(dateData[0]);\n            const month = parseInt(dateData[1]);\n            const day = parseInt(dateData[2]);\n            dd = new Date(year, month - 1, day);\n        }\n        switch (str) {\n            case 'day':\n                dd.setDate(dd.getDate() + AddDayCount);\n                break;\n            case 'month':\n                dd.setMonth(dd.getMonth() + AddDayCount);\n                break;\n            case 'year':\n                dd.setFullYear(dd.getFullYear() + AddDayCount);\n                break;\n        }\n        const y = dd.getFullYear();\n        const m = dd.getMonth() + 1;\n        const d = dd.getDate();\n        let nowDate = y + '-' + m + '-' + d;\n        const lunarData = this.getlunar(y, m, d);\n        const dataObj = new DateType({\n            fullDate: nowDate,\n            year: y,\n            month: m,\n            date: d,\n            day: dd.getDay() + 1,\n            lunar: lunarData.IDayCn,\n            is_today: lunarData.isToday,\n            disabled: false\n        });\n        return dataObj;\n    }\n}\n//# sourceMappingURL=/Users/gaoruicheng/Documents/DcloudProject/uniapp-bugs/uniapp-bugs-main/singlePage/uniapp-hello-x/pages/template/calendar/index.uts.js.map","references":[],"uniExtApis":[],"map":"{\"version\":3,\"file\":\"index.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"index.uts\"],\"names\":[],\"mappings\":\"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\"}"}
