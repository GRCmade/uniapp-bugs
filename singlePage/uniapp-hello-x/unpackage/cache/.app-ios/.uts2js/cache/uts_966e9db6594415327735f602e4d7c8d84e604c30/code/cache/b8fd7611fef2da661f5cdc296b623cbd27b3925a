{"code":"import { defineComponent } from \"vue\";\nclass SwiperViewItem extends UTS.UTSType {\n    static get$UTSMetadata$() {\n        return {\n            kind: 2,\n            get fields() {\n                return {\n                    title: { type: String, optional: false }\n                };\n            }\n        };\n    }\n    constructor(options, metadata = SwiperViewItem.get$UTSMetadata$(), isJSONParse = false) {\n        super();\n        this.__props__ = UTS.UTSType.initProps(options, metadata, isJSONParse);\n        this.title = this.__props__.title;\n        delete this.__props__;\n    }\n}\n/**\n * 根据权重在两个值之间执行线性插值.\n * @constructor\n * @param {number} value1 - 第一个值，该值应为下限.\n * @param {number} value2 - 第二个值，该值应为上限.\n * @param {number} amount - 应介于 0 和 1 之间，指示内插的权重.\n * @returns {number} 内插值\n */\nfunction lerpNumber(value1, value2, amount) {\n    return (value1 + (value2 - value1) * amount);\n}\nexport default defineComponent({\n    data() {\n        return {\n            swiperList: [],\n            swiperIndex: 0,\n            tabScrollView: null,\n            animationFinishIndex: 0,\n            swiperWidth: 0\n        };\n    },\n    onLoad() {\n        for (let i = 0; i < 4; i++) {\n            this.swiperList.push(new SwiperViewItem({\n                title: \"Tab \" + i\n            }));\n        }\n    },\n    onReady() {\n        this.tabScrollView = this.$refs['tabScroll'];\n        this.swiperWidth = this.$refs[\"swiper\"].getBoundingClientRect().width;\n        this.updateTabIndicator(this.swiperIndex, this.swiperIndex, 1);\n    },\n    methods: {\n        onTabClick(index) {\n            this.setSwiperIndex(index, false);\n        },\n        onSwiperTransition(e) {\n            const offset_x = e.detail.dx;\n            // 计算当前索引并重置差异\n            const current_offset_x = offset_x % this.swiperWidth;\n            const current_offset_i = offset_x / this.swiperWidth;\n            const current_index = this.animationFinishIndex + parseInt(current_offset_i + '');\n            // 计算目标索引及边界检查\n            let move_to_index = current_index;\n            if (current_offset_x > 0 && move_to_index < this.swiperList.length - 1) {\n                move_to_index += 1;\n            }\n            else if (current_offset_x < 0 && move_to_index > 0) {\n                move_to_index -= 1;\n            }\n            // 计算偏移百分比\n            const percentage = Math.abs(current_offset_x) / this.swiperWidth;\n            // 通知更新指示线\n            if (current_index != move_to_index) {\n                this.updateTabIndicator(current_index, move_to_index, percentage);\n            }\n        },\n        onSwiperAnimationfinish(e) {\n            this.setSwiperIndex(e.detail.current, true);\n            this.animationFinishIndex = e.detail.current;\n        },\n        setSwiperIndex(index, updateIndicator) {\n            if (this.swiperIndex == index) {\n                return null;\n            }\n            this.swiperIndex = index;\n            if (updateIndicator) {\n                this.updateTabIndicator(index, index, 1);\n            }\n        },\n        updateTabIndicator(current_index, move_to_index, percentage) {\n            if (percentage == 0) {\n                return null;\n            }\n            // 缩放范围\n            const min_ratio = 1;\n            const max_ratio = 1.3;\n            const tabs = this.$refs['swipertab'];\n            const current_node = tabs[current_index];\n            const move_to_node = tabs[move_to_index];\n            // 当前\n            const current_scale = lerpNumber(min_ratio, max_ratio, 1 - percentage);\n            current_node.style.setProperty('transform', `scale(${current_scale})`);\n            // 目标\n            const move_to_scale = lerpNumber(min_ratio, max_ratio, percentage);\n            move_to_node.style.setProperty('transform', `scale(${move_to_scale})`);\n            // 滚动到水平中心位置\n            const target_x = lerpNumber(current_node.offsetLeft, move_to_node.offsetLeft, percentage);\n            const center_x = target_x + move_to_node.offsetWidth / 2 - this.swiperWidth / 2;\n            this.tabScrollView.scrollLeft = center_x;\n        }\n    }\n});\n//# sourceMappingURL=/Users/gaoruicheng/Documents/DcloudProject/uniapp-bugs/uniapp-bugs-main/singlePage/uniapp-hello-x/pages/template/swiper-list2/swiper-list2.uvue?vue&type=script&lang.uts.js.map","references":[],"uniExtApis":[],"map":"{\"version\":3,\"file\":\"swiper-list2.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"swiper-list2.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
