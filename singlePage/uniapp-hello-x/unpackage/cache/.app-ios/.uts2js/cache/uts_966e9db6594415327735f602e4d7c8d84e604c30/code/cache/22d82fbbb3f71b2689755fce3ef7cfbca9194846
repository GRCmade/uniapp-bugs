{"code":"import { defineComponent } from \"vue\";\nimport { COLLECTION_NAME, UNICLOUD_DB_CONTACTS_ADD, UNICLOUD_DB_CONTACTS_UPDATE, UNICLOUD_DB_CONTACTS_DELETE } from './types.uts';\nexport default defineComponent({\n    data() {\n        return {\n            collection: COLLECTION_NAME,\n            uniCloudElement: null\n        };\n    },\n    onReady() {\n        // TODO 后续通过 EventChannel 实现\n        uni.$on(UNICLOUD_DB_CONTACTS_DELETE, this.onDataChange);\n        this.uniCloudElement = this.$refs['udb'];\n        this.uniCloudElement.loadData();\n    },\n    onUnload() {\n        // TODO 后续通过 EventChannel 实现\n        uni.$off(UNICLOUD_DB_CONTACTS_ADD, this.onDataChange);\n        uni.$off(UNICLOUD_DB_CONTACTS_UPDATE, this.onDataChange);\n        uni.$off(UNICLOUD_DB_CONTACTS_DELETE, this.onDataChange);\n    },\n    onShow() {\n        // TODO 后续通过 EventChannel 实现\n        uni.$off(UNICLOUD_DB_CONTACTS_ADD, this.onDataChange);\n        uni.$off(UNICLOUD_DB_CONTACTS_UPDATE, this.onDataChange);\n    },\n    onPullDownRefresh() {\n        this.uniCloudElement.loadData(new UTSJSONObject({\n            clear: true,\n            success: (_) => {\n                uni.stopPullDownRefresh();\n            }\n        }));\n    },\n    methods: {\n        loadMore() {\n            this.uniCloudElement.loadMore();\n        },\n        gotoAddPage() {\n            // TODO 后续通过 EventChannel 实现\n            uni.$on(UNICLOUD_DB_CONTACTS_ADD, this.onDataChange);\n            uni.navigateTo({\n                url: './add'\n            });\n        },\n        gotoDetailPage(id) {\n            // TODO 后续通过 EventChannel 实现\n            uni.$on(UNICLOUD_DB_CONTACTS_UPDATE, this.onDataChange);\n            uni.navigateTo({\n                url: './detail?id=' + id\n            });\n        },\n        onDataChange(_) {\n            this.uniCloudElement.loadData(new UTSJSONObject({\n                clear: true\n            }));\n        }\n    }\n});\n//# sourceMappingURL=/Users/gaoruicheng/Documents/DcloudProject/uniapp-bugs/uniapp-bugs-main/singlePage/uniapp-hello-x/pages/component/unicloud-db-contacts/list.uvue?vue&type=script&lang.uts.js.map","references":[],"uniExtApis":["uni.$on","uni.$off","uni.stopPullDownRefresh","uni.navigateTo"],"map":"{\"version\":3,\"file\":\"list.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"list.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\";AACE,OAAO,EAAE,eAAe,EAAE,wBAAwB,EAAE,2BAA2B,EAAE,2BAA2B,EAAE,MAAM,aAAa,CAAA;AAEjI,+BAAe;IACb,IAAI;QACF,OAAO;YACL,UAAU,EAAE,eAAe;YAC3B,eAAe,EAAE,IAAgC;SAClD,CAAA;IACH,CAAC;IACD,OAAO;QACL,4BAA4B;QAC5B,GAAG,CAAC,GAAG,CAAC,2BAA2B,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QACxD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAsB,CAAA;QAC7D,IAAI,CAAC,eAAgB,CAAC,QAAQ,EAAE,CAAA;IAClC,CAAC;IACD,QAAQ;QACN,4BAA4B;QAC5B,GAAG,CAAC,IAAI,CAAC,wBAAwB,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QACtD,GAAG,CAAC,IAAI,CAAC,2BAA2B,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QACzD,GAAG,CAAC,IAAI,CAAC,2BAA2B,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;IAC3D,CAAC;IACD,MAAM;QACJ,4BAA4B;QAC5B,GAAG,CAAC,IAAI,CAAC,wBAAwB,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QACtD,GAAG,CAAC,IAAI,CAAC,2BAA2B,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;IAC3D,CAAC;IACD,iBAAiB;QACf,IAAI,CAAC,eAAgB,CAAC,QAAQ,mBAAC;YAC7B,KAAK,EAAE,IAAI;YACX,OAAO,EAAE,CAAC,CAAuB;gBAC/B,GAAG,CAAC,mBAAmB,EAAE,CAAA;YAC3B,CAAC;SACF,EAAC,CAAA;IACJ,CAAC;IACD,OAAO,EAAE;QACP,QAAQ;YACN,IAAI,CAAC,eAAgB,CAAC,QAAQ,EAAE,CAAA;QAClC,CAAC;QACD,WAAW;YACT,4BAA4B;YAC5B,GAAG,CAAC,GAAG,CAAC,wBAAwB,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YACrD,GAAG,CAAC,UAAU,CAAC;gBACb,GAAG,EAAE,OAAO;aACb,CAAC,CAAA;QACJ,CAAC;QACD,cAAc,CAAC,EAAW;YACxB,4BAA4B;YAC5B,GAAG,CAAC,GAAG,CAAC,2BAA2B,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YACxD,GAAG,CAAC,UAAU,CAAC;gBACb,GAAG,EAAE,cAAc,GAAG,EAAE;aACzB,CAAC,CAAA;QACJ,CAAC;QACD,YAAY,CAAC,CAAU;YACrB,IAAI,CAAC,eAAgB,CAAC,QAAQ,mBAAC;gBAC7B,KAAK,EAAE,IAAI;aACZ,EAAC,CAAA;QACJ,CAAC;KACF;CACF,EAAA\"}"}
