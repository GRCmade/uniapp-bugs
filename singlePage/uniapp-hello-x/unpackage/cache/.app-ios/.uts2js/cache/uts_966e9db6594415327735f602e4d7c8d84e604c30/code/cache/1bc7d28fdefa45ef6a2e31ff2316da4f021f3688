{"code":"import { defineComponent } from \"vue\";\nclass Banner extends UTS.UTSType {\n    static get$UTSMetadata$() {\n        return {\n            kind: 2,\n            get fields() {\n                return {\n                    cover: { type: String, optional: true },\n                    title: { type: String, optional: true },\n                    post_id: { type: String, optional: true }\n                };\n            }\n        };\n    }\n    constructor(options, metadata = Banner.get$UTSMetadata$(), isJSONParse = false) {\n        super();\n        this.__props__ = UTS.UTSType.initProps(options, metadata, isJSONParse);\n        this.cover = this.__props__.cover;\n        this.title = this.__props__.title;\n        this.post_id = this.__props__.post_id;\n        delete this.__props__;\n    }\n}\nclass Item extends UTS.UTSType {\n    static get$UTSMetadata$() {\n        return {\n            kind: 2,\n            get fields() {\n                return {\n                    author_name: { type: String, optional: false },\n                    cover: { type: String, optional: false },\n                    id: { type: Number, optional: false },\n                    post_id: { type: String, optional: false },\n                    published_at: { type: String, optional: false },\n                    title: { type: String, optional: false }\n                };\n            }\n        };\n    }\n    constructor(options, metadata = Item.get$UTSMetadata$(), isJSONParse = false) {\n        super();\n        this.__props__ = UTS.UTSType.initProps(options, metadata, isJSONParse);\n        this.author_name = this.__props__.author_name;\n        this.cover = this.__props__.cover;\n        this.id = this.__props__.id;\n        this.post_id = this.__props__.post_id;\n        this.published_at = this.__props__.published_at;\n        this.title = this.__props__.title;\n        delete this.__props__;\n    }\n}\nexport default defineComponent({\n    data() {\n        return {\n            th_item: [\"排序\", \"筛选\"],\n            refresherTriggered: false,\n            banner: new Banner({}),\n            listData: [],\n            last_id: '',\n        };\n    },\n    onLoad() {\n        this.getBanner();\n        this.getList();\n    },\n    onUnload() {\n    },\n    methods: {\n        getBanner() {\n            let data = new UTSJSONObject({\n                column: 'id,post_id,title,author_name,cover,published_at' //需要的字段名\n            });\n            uni.request({\n                url: 'https://unidemo.dcloud.net.cn/api/banner/36kr',\n                data: data,\n                success: data => {\n                    this.refresherTriggered = false;\n                    if (data.statusCode == 200) {\n                        const result = data.data;\n                        if (result != null) {\n                            this.banner = result;\n                        }\n                    }\n                },\n                fail: (e) => {\n                    uni.__log__('log', 'at pages/template/list-news/list-news.uvue:82', 'fail', e);\n                }\n            }, Banner);\n        },\n        getList() {\n            let url = \"https://unidemo.dcloud.net.cn/api/news?column=id,post_id,title,author_name,cover,published_at\";\n            /* if (this.last_id != \"\") {\n              const minId = parseInt((this.last_id))\n              const time = new Date().getTime() + '';\n              const pageSize = 10;\n              url = url + \"&minId=\" + minId + \"&time=\" + time + \"&pageSize=\" + pageSize;\n            } */\n            uni.request({\n                url: url,\n                method: \"GET\",\n                success: (res) => {\n                    if (res.statusCode == 200) {\n                        uni.__log__('log', 'at pages/template/list-news/list-news.uvue:100', res);\n                        const result = res.data;\n                        if (result != null) {\n                            this.listData = result; //因本接口没有更多分页数据，所以重新赋值。正常有分页的列表应该如下面push方式增加数组项\n                            // this.listData.push(...result)\n                            // this.last_id = this.listData[0].id + \"\";\n                        }\n                        this.refresherTriggered = false;\n                    }\n                },\n                fail: (res) => {\n                    uni.__log__('log', 'at pages/template/list-news/list-news.uvue:111', 'fail', res);\n                    this.refresherTriggered = false;\n                }\n            });\n        },\n        goDetail(e) {\n            const detail = e;\n            const post_id = detail.post_id;\n            const cover = detail.cover;\n            const title = detail.title;\n            uni.navigateTo({\n                url: '/pages/template/list-news/detail/detail?post_id=' + post_id + \"&cover=\" + cover + \"&title=\" + title\n            });\n        },\n        bannerClick(e) {\n            const detail = e;\n            const post_id = detail.post_id;\n            const cover = detail.cover;\n            const title = detail.title;\n            uni.navigateTo({\n                url: '/pages/template/list-news/detail/detail?post_id=' + post_id + \"&cover=\" + cover + \"&title=\" + title\n            });\n        },\n        clickTH(index) {\n            uni.showModal({\n                content: \"点击表头项：\" + index,\n                showCancel: false\n            });\n        },\n        onRefresherrefresh() {\n            this.refresherTriggered = true;\n            this.getBanner();\n            this.getList();\n        }\n    }\n});\n//# sourceMappingURL=/Users/gaoruicheng/Documents/DcloudProject/uniapp-bugs/uniapp-bugs-main/singlePage/uniapp-hello-x/pages/template/list-news/list-news.uvue?vue&type=script&lang.uts.js.map","references":[],"uniExtApis":["uni.request","uni.__log__","uni.navigateTo","uni.showModal"],"map":"{\"version\":3,\"file\":\"list-news.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"list-news.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\";MACO,MAAM;;;;;;;;;;;;;;;;;;;;;;MAKN,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAST,+BAAe;IACb,IAAI;QACF,OAAO;YACL,OAAO,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC;YACrB,kBAAkB,EAAE,KAAK;YACzB,MAAM,aAAE,EAAE,CAAU;YACpB,QAAQ,EAAE,EAAY;YACtB,OAAO,EAAE,EAAE;SACZ,CAAC;IACJ,CAAC;IACD,MAAM;QACJ,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IACD,QAAQ;IACR,CAAC;IACD,OAAO,EAAE;QACP,SAAS;YACP,IAAI,IAAI,qBAAG;gBACT,MAAM,EAAE,iDAAiD,CAAC,QAAQ;aACnE,CAAA,CAAC;YACF,GAAG,CAAC,OAAO,CAAS;gBAClB,GAAG,EAAE,+CAA+C;gBACpD,IAAI,EAAE,IAAI;gBACV,OAAO,EAAE,IAAI;oBACX,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAA;oBAC/B,IAAI,IAAI,CAAC,UAAU,IAAI,GAAG,EAAE;wBAC1B,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAA;wBACxB,IAAI,MAAM,IAAI,IAAI,EAAE;4BAClB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;yBACtB;qBACF;gBACH,CAAC;gBACD,IAAI,EAAE,CAAC,CAAC;oBACN,GAAG,CAAC,OAAO,CAAC,KAAK,EAAC,+CAA+C,EAAC,MAAM,EAAE,CAAC,CAAC,CAAC;gBAC/E,CAAC;aACF,SAAC,CAAC;QACL,CAAC;QACD,OAAO;YACL,IAAI,GAAG,GAAG,+FAA+F,CAAC;YAC1G;;;;;gBAKI;YAEJ,GAAG,CAAC,OAAO,CAAS;gBAClB,GAAG,EAAE,GAAG;gBACR,MAAM,EAAE,KAAK;gBACb,OAAO,EAAE,CAAC,GAAG;oBACX,IAAI,GAAG,CAAC,UAAU,IAAI,GAAG,EAAE;wBACzB,GAAG,CAAC,OAAO,CAAC,KAAK,EAAC,gDAAgD,EAAC,GAAG,CAAC,CAAC;wBACxE,MAAM,MAAM,GAAG,GAAG,CAAC,IAAI,CAAA;wBACvB,IAAI,MAAM,IAAI,IAAI,EAAE;4BAClB,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAA,CAAC,8CAA8C;4BACrE,gCAAgC;4BAChC,2CAA2C;yBAC5C;wBACD,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;qBACjC;gBACH,CAAC;gBACD,IAAI,EAAE,CAAC,GAAG;oBACR,GAAG,CAAC,OAAO,CAAC,KAAK,EAAC,gDAAgD,EAAC,MAAM,EAAE,GAAG,CAAC,CAAC;oBAChF,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAA;gBACjC,CAAC;aACF,CAAC,CAAC;QACL,CAAC;QACD,QAAQ,CAAC,CAAQ;YACf,MAAM,MAAM,GAAG,CAAC,CAAC;YACjB,MAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC;YAC/B,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;YAC3B,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;YAC3B,GAAG,CAAC,UAAU,CAAC;gBACb,GAAG,EAAE,kDAAkD,GAAG,OAAO,GAAG,SAAS,GAAG,KAAK,GAAG,SAAS,GAAG,KAAK;aAC1G,CAAC,CAAC;QACL,CAAC;QACD,WAAW,CAAC,CAAU;YACpB,MAAM,MAAM,GAAG,CAAC,CAAC;YACjB,MAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC;YAC/B,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;YAC3B,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;YAC3B,GAAG,CAAC,UAAU,CAAC;gBACb,GAAG,EAAE,kDAAkD,GAAG,OAAO,GAAG,SAAS,GAAG,KAAK,GAAG,SAAS,GAAG,KAAK;aAC1G,CAAC,CAAC;QACL,CAAC;QACD,OAAO,CAAC,KAAc;YACpB,GAAG,CAAC,SAAS,CAAC;gBACZ,OAAO,EAAE,QAAQ,GAAG,KAAK;gBACzB,UAAU,EAAE,KAAK;aAClB,CAAC,CAAC;QACL,CAAC;QACD,kBAAkB;YAChB,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAA;YAC9B,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,IAAI,CAAC,OAAO,EAAE,CAAC;QACjB,CAAC;KACF;CACF,EAAC\"}"}
