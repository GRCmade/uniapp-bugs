{"code":"import { defineComponent } from \"vue\";\nimport { COLLECTION_NAME, GenderType, GenderList, UNICLOUD_DB_CONTACTS_UPDATE, UNICLOUD_DB_CONTACTS_DELETE } from './types.uts';\nexport default defineComponent({\n    data() {\n        return {\n            collection: '',\n            where: '',\n            genderList: GenderList,\n            whereID: '',\n            uniCloudElement: null\n        };\n    },\n    onLoad(options = null) {\n        this.collection = COLLECTION_NAME;\n        this.whereID = options['id'];\n        this.where = `_id=='${this.whereID}'`;\n    },\n    onReady() {\n        this.uniCloudElement = this.$refs['udb'];\n    },\n    methods: {\n        onFormSubmit: function (e) {\n            const formData = e.detail.value;\n            const genderString = formData['gender'];\n            formData['gender'] = (genderString.length > 0) ? parseInt(genderString) : -1;\n            this.uniCloudElement.update(this.whereID, formData, new UTSJSONObject({\n                showToast: false,\n                needLoading: true,\n                needConfirm: false,\n                loadingTitle: \"正在保存...\",\n                success: (_) => {\n                    // TODO 后续通过 EventChannel 实现\n                    uni.$emit(UNICLOUD_DB_CONTACTS_UPDATE, this.whereID);\n                    setTimeout(() => {\n                        uni.navigateBack();\n                    }, 500);\n                },\n                fail: (err = null) => {\n                    const error = err;\n                    uni.showModal({\n                        content: error.errMsg,\n                        showCancel: false\n                    });\n                }\n            }));\n        },\n        remove(id = null, name = null) {\n            this.uniCloudElement.remove(id, new UTSJSONObject({\n                needConfirm: true,\n                needLoading: true,\n                loadingTitle: \"正在删除...\",\n                confirmTitle: \"确定删除?\",\n                confirmContent: name,\n                success: (_) => {\n                    // TODO 后续通过 EventChannel 实现\n                    uni.$emit(UNICLOUD_DB_CONTACTS_DELETE, this.whereID);\n                    setTimeout(() => {\n                        uni.navigateBack({\n                            delta: 2\n                        });\n                    }, 500);\n                },\n                fail: (err = null) => {\n                    const error = err;\n                    uni.showModal({\n                        content: error.errMsg,\n                        showCancel: false\n                    });\n                }\n            }));\n        }\n    }\n});\n//# sourceMappingURL=/Users/gaoruicheng/Documents/DcloudProject/uniapp-bugs/uniapp-bugs-main/singlePage/uniapp-hello-x/pages/component/unicloud-db-contacts/edit.uvue?vue&type=script&lang.uts.js.map","references":[],"uniExtApis":["uni.$emit","uni.navigateBack","uni.showModal"],"map":"{\"version\":3,\"file\":\"edit.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"edit.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\";AACE,OAAO,EAAE,eAAe,EAAE,UAAU,EAAE,UAAU,EAAE,2BAA2B,EAAE,2BAA2B,EAAE,MAAM,aAAa,CAAA;AAE/H,+BAAe;IACb,IAAI;QACF,OAAO;YACL,UAAU,EAAE,EAAE;YACd,KAAK,EAAE,EAAE;YACT,UAAU,EAAE,UAA0B;YACtC,OAAO,EAAE,EAAE;YACX,eAAe,EAAE,IAAgC;SAClD,CAAA;IACH,CAAC;IACD,MAAM,CAAC,cAAO;QACZ,IAAI,CAAC,UAAU,GAAG,eAAe,CAAC;QAClC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,IAAI,CAAW,CAAC;QACvC,IAAI,CAAC,KAAK,GAAG,SAAS,IAAI,CAAC,OAAO,GAAG,CAAC;IACxC,CAAC;IACD,OAAO;QACL,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAsB,CAAA;IAC/D,CAAC;IACD,OAAO,EAAE;QACP,YAAY,EAAE,UAAU,CAAsB;YAC5C,MAAM,QAAQ,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,CAAA;YAC/B,MAAM,YAAY,GAAG,QAAQ,CAAC,QAAQ,CAAW,CAAA;YACjD,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;YAC5E,IAAI,CAAC,eAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,QAAQ,oBAAE;gBACnD,SAAS,EAAE,KAAK;gBAChB,WAAW,EAAE,IAAI;gBACjB,WAAW,EAAE,KAAK;gBAClB,YAAY,EAAE,SAAS;gBACvB,OAAO,EAAE,CAAC,CAA0B;oBAClC,4BAA4B;oBAC5B,GAAG,CAAC,KAAK,CAAC,2BAA2B,EAAE,IAAI,CAAC,OAAO,CAAC,CAAA;oBACpD,UAAU,CAAC;wBACT,GAAG,CAAC,YAAY,EAAE,CAAA;oBACpB,CAAC,EAAE,GAAG,CAAC,CAAA;gBACT,CAAC;gBACD,IAAI,EAAE,CAAC,UAAgB;oBACrB,MAAM,KAAK,GAAG,GAAoB,CAAA;oBAClC,GAAG,CAAC,SAAS,CAAC;wBACZ,OAAO,EAAE,KAAK,CAAC,MAAM;wBACrB,UAAU,EAAE,KAAK;qBAClB,CAAC,CAAA;gBACJ,CAAC;aACF,EAAC,CAAA;QACJ,CAAC;QACD,MAAM,CAAC,SAAkB,EAAE,WAAoB;YAC7C,IAAI,CAAC,eAAgB,CAAC,MAAM,CAAC,EAAG,oBAAE;gBAChC,WAAW,EAAE,IAAI;gBACjB,WAAW,EAAE,IAAI;gBACjB,YAAY,EAAE,SAAS;gBACvB,YAAY,EAAE,OAAO;gBACrB,cAAc,EAAE,IAAI;gBACpB,OAAO,EAAE,CAAC,CAA0B;oBAClC,4BAA4B;oBAC5B,GAAG,CAAC,KAAK,CAAC,2BAA2B,EAAE,IAAI,CAAC,OAAO,CAAC,CAAA;oBACpD,UAAU,CAAC;wBACT,GAAG,CAAC,YAAY,CAAC;4BACf,KAAK,EAAE,CAAC;yBACT,CAAC,CAAA;oBACJ,CAAC,EAAE,GAAG,CAAC,CAAA;gBACT,CAAC;gBACD,IAAI,EAAE,CAAC,UAAgB;oBACrB,MAAM,KAAK,GAAG,GAAoB,CAAA;oBAClC,GAAG,CAAC,SAAS,CAAC;wBACZ,OAAO,EAAE,KAAK,CAAC,MAAM;wBACrB,UAAU,EAAE,KAAK;qBAClB,CAAC,CAAA;gBACJ,CAAC;aACF,EAAC,CAAA;QACJ,CAAC;KACF;CACF,EAAA\"}"}
