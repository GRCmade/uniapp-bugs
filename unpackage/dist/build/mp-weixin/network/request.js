"use strict";const e=require("../common/vendor.js"),t=require("./baseUrl.js");require("./api.js");exports.Request=class{http(a){let o=a.url,s=a.method,n=a.header||{},i=Object.assign(a.data||{}),r=a.hideLoading||!1;a.whetherData,a.isRomteServer;let d=t.base.baseUrl+o;return console.log(d),s&&(s=s.toUpperCase(),n=Object.assign({"content-type":"application/json"},a.header,{saToken:e.index.getStorageSync("user").saToken?e.index.getStorageSync("user").saToken:""})),r||e.index.showLoading({mask:!0}),new Promise(((t,a)=>{e.index.request({url:d,data:i,method:s,header:n,success:a=>(r||e.index.hideLoading(),200==a.statusCode&&("401"!==a.data.code?(t(a.data),!0):(e.index.setStorageSync("badgeNum",0),e.index.removeStorageSync("user"),e.index.setStorageSync("autoBiometric","yes"),void e.index.reLaunch({url:"/pages/login/login"})))),fail:a=>(r||e.index.hideLoading(),e.index.showToast({title:"数据请求异常，请重新进入此页面！",icon:"none"}),t(!1),!1),complete(){}})}))}};
